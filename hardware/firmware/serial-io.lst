MPASM  5.35beta                     SERIAL-IO.ASM   6-9-2012  1:09:17         PAGE  1


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00001 ; vim:set syntax=pic ts=8:
                      00002                 LIST n=90
                      00003 ;@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
                      00004 ;@@                                                                         @@
                      00005 ;@@                                                                         @@
                      00006 ;@@  @@@   @@@@@  @@@@   @@@   @@@   @              @@@      @   @@@        @@
                      00007 ;@@ @   @  @      @   @   @   @   @  @               @       @  @   @       @@
                      00008 ;@@ @      @      @   @   @   @   @  @               @      @   @   @       @@
                      00009 ;@@  @@@   @@@@   @@@@    @   @@@@@  @      @@@@@    @     @    @   @       @@
                      00010 ;@@     @  @      @ @     @   @   @  @               @    @     @   @       @@
                      00011 ;@@ @   @  @      @  @    @   @   @  @               @   @      @   @       @@
                      00012 ;@@  @@@   @@@@@  @   @  @@@  @   @  @@@@@          @@@  @       @@@        @@
                      00013 ;@@                                                                         @@
                      00014 ;@@ Copyright (c) 2012 by Steven L. Willoughby, Aloha, Oregon, USA.  All    @@
                      00015 ;@@ Rights Reserved.                                                        @@
                      00016 ;@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
                      00017 ;
                      00018 ; Portions based on earlier code copyright (c) 2004, 2005, 2006, 2007, 2008, 
                      00019 ; 2009, Steven L. Willoughby, Aloha, Oregon, USA.  All Rights Reserved.
                      00020 ;
                      00021 ; General serial console I/O handling
                      00022 ; This module manages the TXIE interrupt masks as needed
                      00023 ;
                      00024         PROCESSOR       18F4685
                      00025         RADIX           DEC
                      00026 ; 
                      00027 ;==============================================================================
                      00028 ; PUBLIC ENTRY POINTS
                      00029 ;==============================================================================
                      00030 ;       SIO_INIT        Initialize module (call this once first)
                      00031 ;
                      00032 #include <p18f4685.inc>
                      00001         LIST
                      00002 
                      00003 ;==========================================================================
                      00004 ;  MPASM PIC18F4685 processor include
                      00005 ; 
                      00006 ;  (c) Copyright 1999-2007 Microchip Technology, All rights reserved
                      00007 ;==========================================================================
                      00008 
                      04822         LIST
                      00033 #include "serial-io-bits.inc"
                      00001 ; vim:set syntax=pic ts=8:
                      00002                 LIST n=90
                      00003 ;@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
                      00004 ;@@                                                                         @@
                      00005 ;@@                                                                         @@
                      00006 ;@@  @@@   @@@@@  @@@@   @@@   @@@   @              @@@      @   @@@        @@
                      00007 ;@@ @   @  @      @   @   @   @   @  @               @       @  @   @       @@
                      00008 ;@@ @      @      @   @   @   @   @  @               @      @   @   @       @@
                      00009 ;@@  @@@   @@@@   @@@@    @   @@@@@  @      @@@@@    @     @    @   @       @@
                      00010 ;@@     @  @      @ @     @   @   @  @               @    @     @   @       @@
                      00011 ;@@ @   @  @      @  @    @   @   @  @               @   @      @   @       @@
                      00012 ;@@  @@@   @@@@@  @   @  @@@  @   @  @@@@@          @@@  @       @@@        @@
                      00013 ;@@                                                                         @@
                      00014 ;@@ Copyright (c) 2012 by Steven L. Willoughby, Aloha, Oregon, USA.  All    @@
                      00015 ;@@ Rights Reserved.                                                        @@
                      00016 ;@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
                      00017 ;
                      00018 ; Portions based on earlier code copyright (c) 2004, 2005, 2006, 2007, 2008, 
                      00019 ; 2009, Steven L. Willoughby, Aloha, Oregon, USA.  All Rights Reserved.
                      00020 ;
                      00021 ; serial io (SIO) module bit definitions, included by caller and the module
                      00022 ;
                      00023 #include "serial-io-user.inc"
                      00001 ;
                      00002 ; To use the serial I/O module, you need to edit this
                      00003 ; include file to suit your application.
                      00004 ;
  00000100            00005 SIO_TX_BUFFER_START     EQU     0x100   ; Starting address of 256-byte Tx buffer*
  00000200            00006 SIO_RX_BUFFER_START     EQU     0x200   ; Starting address of 256-byte Rx buffer*
  00000300            00007 SIO_DATA_START          EQU     0x300   ; Starting address for SIO module variable storage
  00015000            00008 SIO_TABLE_START         EQU     0x15000 ; Starting ROM address for SIO module tables*
                      00009 ;
                      00010 ; * must be aligned to the start of a 256-byte bank.
                      00011 ;
                      00024 ;       
                      00025 ;                    bit 7      6      5      4      3      2      1      0
                      00026 ;                     _______________________________________________________
                      00027 ; +$00 SIO_STATUS    |      |      |SIO_  |SIO_  |RXDATA|TXDATA|RXDATA|TXDATA|
                      00028 ;                    |      |      | FERR | ORUN |_FULL |_FULL |_QUEUE|_QUEUE|
                      00029 ;                    |______|______|______|______|______|______|______|______|
                      00030 ;
  00000000            00031 TXDATA_QUEUE    EQU     0       ; Tx data waiting in buffer now to be sent
MPASM  5.35beta                     SERIAL-IO.ASM   6-9-2012  1:09:17         PAGE  2


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

  00000001            00032 RXDATA_QUEUE    EQU     1       ; Rx data waiting in buffer to be retrieved
  00000002            00033 TXDATA_FULL     EQU     2       ; Tx buffer full
  00000003            00034 RXDATA_FULL     EQU     3       ; Rx buffer full
  00000004            00035 SIO_ORUN        EQU     4       ; I/O Error: incoming data overrun  (caller clears)
  00000005            00036 SIO_FERR        EQU     5       ; I/O Error: break/framing error received  (caller clears)
                      00037 ;
                      00038 ; Baud rate settings
                      00039 ;
  00000000            00040 SIO_300         EQU     0
  00000001            00041 SIO_600         EQU     1
  00000002            00042 SIO_1200        EQU     2
  00000003            00043 SIO_2400        EQU     3
  00000004            00044 SIO_4800        EQU     4
  00000005            00045 SIO_9600        EQU     5
  00000006            00046 SIO_19200       EQU     6
  00000007            00047 SIO_38400       EQU     7
  00000008            00048 SIO_57600       EQU     8
  00000009            00049 SIO_115200      EQU     9
                      00034 
                      00035 ;==============================================================================
                      00036 ; REGISTERS USED
                      00037 ;==============================================================================
                      00038 ;
                      00039 ;                    bit 7      6      5      4      3      2      1      0
                      00040 ;                     _______________________________________________________
                      00041 ; $F9D PIE1          |      |      |      |      |      |      |      |      |
                      00042 ;                    |      |      | RXIE | TXIE |      |      |      |      |
                      00043 ;                    |______|______|______|______|______|______|______|______|
                      00044 ; $F9E PIR1          |      |      |      |      |      |      |      |      |
                      00045 ;                    |      |      | RXIF | TXIF |      |      |      |      |
                      00046 ;                    |______|______|______|______|______|______|______|______|
                      00047 ; $F9F IPR1          |      |      |      |      |      |      |      |      |
                      00048 ;                    |      |      | RXIP | TXIP |      |      |      |      |
                      00049 ;                    |______|______|______|______|______|______|______|______|
                      00050 ; $FAB RCSTA         |      |      |      |      |      |      |      |      |
                      00051 ;                    | SPEN |  RX9 | SREN | CREN |ADDEN | FERR | OERR | RX9D |
                      00052 ;                    |______|______|______|______|______|______|______|______|
                      00053 ; $FAC TXSTA         |      |      |      |      |      |      |      |      |
                      00054 ;                    | CSRC |  TX9 | TXEN | SYNC |SENDB | BRGH | TRMT | TX9D |
                      00055 ;                    |______|______|______|______|______|______|______|______|
                      00056 ; $FAD TXREG         |                                                       |
                      00057 ;                    | Byte to be transmitted (bit 9 is in TX9D if used)     |
                      00058 ;                    |______|______|______|______|______|______|______|______|
                      00059 ; $FAE RCREG         |                                                       |
                      00060 ;                    | Byte received (bit 9 is in RX9D if used)              |
                      00061 ;                    |______|______|______|______|______|______|______|______|
                      00062 ; $FAF SPBRG         |                                                       |
                      00063 ;                    | Baud-rate generator value (lower byte if 16-bit mode) |
                      00064 ;                    |______|______|______|______|______|______|______|______|
                      00065 ; $FB0 SPBRGH        |                                                       |
                      00066 ;                    | Baud-rate generator value (upper byte) if 16-bit mode |
                      00067 ;                    |______|______|______|______|______|______|______|______|
                      00068 ; $FB8 BAUDCON       |      |      |//////|      |      |//////|      |      |
                      00069 ;                    |ADBOVF| RCIDL|//////| SCKP |BRG16 |//////|  WUE |ABDEN |
                      00070 ;                    |______|______|//////|______|______|//////|______|______|
                      00071 ;
                      00072 ;==============================================================================
                      00073 ; RAM LOCATIONS USED
                      00074 ;==============================================================================
                      00075 ;
                      00076 ; Three memory banks are used: one for each of the data buffers, and a third
                      00077 ; for the variables used by this module.
                      00078 ;       
                      00079 ;                    bit 7      6      5      4      3      2      1      0
                      00080 ;                     _______________________________________________________
                      00081 ; +$00 SIO_STATUS    |      |      |SIO_  |SIO_  |RXDATA|TXDATA|RXDATA|TXDATA|
                      00082 ;                    |      |      | FERR | ORUN |_FULL |_FULL |_QUEUE|_QUEUE|
                      00083 ;                    |______|______|______|______|______|______|______|______|
                      00084 ; +$01 SIO_INPUT     |                                                       |
                      00085 ;                    | Character last read from serial port                  |
                      00086 ;                    |______|______|______|______|______|______|______|______|
                      00087 ; +$02 SIO_OUTPUT    |                                                       |
                      00088 ;                    | Character last written to serial port                 |
                      00089 ;                    |______|______|______|______|______|______|______|______|
                      00090 ; +$03 TX_BUF_START  |                                                       |
                      00091 ;                    | Pointer into TX_BUFFER at NEXT char to be transmitted |
                      00092 ;                    |______|______|______|______|______|______|______|______|
                      00093 ; +$04 TX_BUF_END    |                                                       |
                      00094 ;                    | Pointer into TX_BUFFER where next char will be stored |
                      00095 ;                    |______|______|______|______|______|______|______|______|
                      00096 ; +$05 RX_BUF_START  |                                                       |
                      00097 ;                    | Pointer into RX_BUFFER at NEXT char to be transmitted |
                      00098 ;                    |______|______|______|______|______|______|______|______|
                      00099 ; +$06 RX_BUF_END    |                                                       |
MPASM  5.35beta                     SERIAL-IO.ASM   6-9-2012  1:09:17         PAGE  3


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00100 ;                    | Pointer into RX_BUFFER where next char will be stored |
                      00101 ;                    |______|______|______|______|______|______|______|______|
                      00102 ; +$07 TX_CHAR       |                                                       |
                      00103 ;                    | Temporary storage for character being output.         |
                      00104 ;                    |______|______|______|______|______|______|______|______|
                      00105 ; +$08 SIO_X         |                                                       |
                      00106 ;                    | Temporary storage register                            |
                      00107 ;                    |______|______|______|______|______|______|______|______|
                      00108 ; +$09 FSR1H_SAVE    |///////////////////////////|Temp store for high-order  |
                      00109 ;                    |///////////////////////////|bits of caller's FSR1 ptr  |
                      00110 ;                    |///////////////////////////|______|______|______|______|
                      00111 ; +$0A FSR1L_SAVE    |                                                       |
                      00112 ;                    | Temporary storage for low-order bits of caller's FSR1 |
                      00113 ;                    |______|______|______|______|______|______|______|______|
                      00114 ; +$0B B32__BCD_ASC  | 5-byte BCD output buffer      10-byte ASCII output    |
                      00115 ; +$0C               | for binary-to-BCD conv.  ---> buffer for binary or    |
                      00116 ; +$0D               | Also input to BCD to ASCII    BCD to ASCII conversions|
                      00117 ; +$0E               | conversion.           /|\               |             |
                      00118 ; +$0F               |........................|.               |             |
                      00119 ; +$10 B32__BIN      | 4-byte binary input    |                |             |
                      00120 ; +$11               | for bin-to-BCD conversion               |             |
                      00121 ; +$12               |                                         |             |
                      00122 ; +$13               |                                         |             |
                      00123 ; +$14               |////////////////////////////______|______V______|______|
                      00124 ;
                      00125 ;
                      00126 ;
                      00127 
                      00128 _SIO_TXBUF_DATA UDATA   SIO_TX_BUFFER_START
000100                00129 TX_BUFFER:
000100                00130         RES .256
                      00131 
                      00132 _SIO_RXBUF_DATA UDATA   SIO_RX_BUFFER_START
000200                00133 RX_BUFFER:
000200                00134         RES .256
                      00135 
                      00136 _SIO_VAR_DATA   UDATA   SIO_DATA_START
  0000                00137         GLOBAL  SIO_STATUS      ; export this out to other modules
  0000                00138         GLOBAL  SIO_INPUT, SIO_OUTPUT
  0000                00139         GLOBAL  B32__BIN, B32__BCD_ASC
                      00140 
000300                00141 SIO_STATUS      RES     1       ; SIO module general status bits
000301                00142 SIO_INPUT       RES     1       ; external buffer to receive Rx byte
000302                00143 SIO_OUTPUT      RES     1       ; external buffer to send Tx byte
000303                00144 TX_BUF_START    RES     1       ; Pointer to start of Tx ring buffer
000304                00145 TX_BUF_END      RES     1       ; Pointer to end of Tx ring buffer
000305                00146 RX_BUF_START    RES     1       ; Pointer to start of Tx ring buffer
000306                00147 RX_BUF_END      RES     1       ; Pointer to end of Tx ring buffer
000307                00148 TX_CHAR         RES     1       ; Holding area for character on its way out
000308                00149 SIO_X           RES     1       ; Temporary variable
000309                00150 SIO_TMPPC       RES     1       ; Temporary to read PC to latch it
00030A                00151 FSR1H_SAVE      RES     1       ; Storage for caller's FSR1H value
00030B                00152 FSR1L_SAVE      RES     1       ; Storage for caller's FSR1L value
00030C                00153 B32__BIT        RES     1       ; Current bit being converted
00030D                00154 B32__OUTCTR     RES     1       ; Output counter
00030E                00155 B32__FSR0H      RES     1       ; Temporary FSR0H storage
00030F                00156 B32__FSR0L      RES     1       ; Temporary FSR0L storage
000310                00157 B32__FSR1H      RES     1       ; Temporary FSR1H storage
000311                00158 B32__FSR1L      RES     1       ; Temporary FSR1L storage
000312                00159 B32__BCD_ASC    RES     5       ; Storage for BCD conversion routines
000317                00160 B32__BIN        RES     4       ; **MUST** follow B32__BCD_ASC
                      00161 
                      00162         
                      00163 
                      00164 ;==============================================================================
                      00165 ;
                      00166 ; The baud rate calculations are:
                      00167 ; low-speed   8-bit (BRG16=0, BRGH=0) is Fosc/[64(n+1)]
                      00168 ; high-speed  8-bit (BRG16=0, BRGH=1) is Fosc/[16(n+1)]
                      00169 ; low-speed  16-bit (BRG16=1, BRGH=0) is Fosc/[16(n+1)]
                      00170 ; high-speed 16-bit (BRG16=1, BRGH=1) is Fosc/[4(n+1)]
                      00171 ;
                      00172 ; for desired baud rate of b,
                      00173 ;       X = [((Fosc/b)/d)-1]    (d is multiplier above; e.g. 64 in first case)
                      00174 ;       X goes into SPBRG (or SPBRGH:SPBRG if 16 bit)
                      00175 ;       error = (Fosc/d(X+1) - b) / b
                      00176 ;
                      00177 ;
                      00178 ; Operational notes
                      00179 ;
                      00180 ; Sending:
                      00181 ;       When TXIF is set, TXREG is ready to accept another byte
                      00182 ;       data byte written to TXREG and is sent out the port
                      00183 ;       TRMT bit is clear while byte is sent, then set when it's done.
MPASM  5.35beta                     SERIAL-IO.ASM   6-9-2012  1:09:17         PAGE  4


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00184 ; Receiving:
                      00185 ;       When a byte is received, RXIF is set
                      00186 ;       RCSTA will alert to errors and holds bit 9 if used
                      00187 ;       RCREG holds the received byte
                      00188 ;       if error, clear CREN to clear error state
                      00189 ;       clear RXIF to acknowledge receipt
                      00190 ;
                      00191 ; The Tx and Rx buffers are 256-byte ring buffers each in a single
                      00192 ; RAM page.  The 8-bit pointers that index them are assumed to wrap
                      00193 ; around naturally to create the ring buffer effect.  Changing the
                      00194 ; buffer sizes will require recoding the pointer arithmetic.
                      00195 ;
                      00196 ; In each case, the buffer has two pointers: START, which points to the
                      00197 ; next character to be read out of the buffer, and END, which points to
                      00198 ; the location where the next character will be written into the buffer.
                      00199 ;
                      00200 ;   BUFFER   Q 
                      00201 ; [________] 0 If START=END, the buffer is empty.  If the QUEUE flag is
                      00202 ;  ^           clear, this means the buffer is empty, as opposed to the
                      00203 ;  ^           case where the pointers wrap around to be equal again,
                      00204 ;              but QUEUE is set (meaning buffer is full).
                      00205 ; [H_______] 1 Pushing "H" into the buffer means writing it to [E++],
                      00206 ;  ^^          so E points to the next available location.
                      00207 ;  SE
                      00208 ;
                      00209 ; [HELLO___] 1 Pushing "ELLO" continues...
                      00210 ;  ^    ^
                      00211 ;  S    E
                      00212 ;
                      00213 ; [__LLO___] 1 Pulling two bytes from the buffer meas reading from [S++].
                      00214 ;    ^  ^      (The buffer really still contains [HELLO___] but since the
                      00215 ;    S  E      pointer's moved on, we're ignoring the "HE" we read and those
                      00216 ;              bytes will be overwritten later.)
                      00217 ; [O_LLO, W] 1 Pushing ", WO" illustrates how we wrap around in the ring
                      00218 ;   ^^         buffer, so no matter where we're reading/writing there is
                      00219 ;   ES         always the same maximum available buffer space.
                      00220 ;
                      00221 ; [ORLLO, W] 1 Pushing one more byte fills the buffer (START=END), so we
                      00222 ;    ^         won't allow more writes until some more is read.
                      00223 ;    ^
                      00224 ;
                      00225 ; [OR____ W] 1 Reading more, leaves more room...
                      00226 ;    ^   ^
                      00227 ;    E   S
                      00228 ;
                      00229 ; [ORLD!_ W] 1 for more data...
                      00230 ;       ^^
                      00231 ;       ES
                      00232 ;
                      00233 ; [________] 0 reading it back to empty leaves it like this.  It's ready
                      00234 ;       ^      regardless of where in the buffer the pointers are located.
                      00235 ;       ^      the QUEUE flag is cleared to indicate no data are queued.
                      00236 ;
                      00237 
                      00238 
                      00239 _SIO_CODE CODE
  0000                00240         GLOBAL  SIO_INIT
  0000                00241         GLOBAL  SIO_ECHO
  0000                00242         GLOBAL  SIO_ECHO_W
  0000                00243         GLOBAL  SIO_WRITE
  0000                00244         GLOBAL  SIO_WRITE_W
  0000                00245         GLOBAL  SIO_PUTCHAR
  0000                00246         GLOBAL  SIO_PUTCHAR_W
  0000                00247         GLOBAL  SIO_RECV
  0000                00248         GLOBAL  SIO_SEND
  0000                00249         GLOBAL  SIO_NEWLINE
  0000                00250         GLOBAL  SIO_GETCHAR
  0000                00251         GLOBAL  SIO_GETCHAR_W
  0000                00252         GLOBAL  SIO_READ
  0000                00253         GLOBAL  SIO_READ_W
  0000                00254         GLOBAL  SIO_PRINT_HEX
  0000                00255         GLOBAL  SIO_PRINT_HEX_W
  0000                00256         GLOBAL  SIO_SET_BAUD_W
  0000                00257         GLOBAL  B32__BIN2BCD
  0000                00258         GLOBAL  B32__BCD2ASCII
                      00259 ;
                      00260 ;==============================================================================
                      00261 ; SIO_INIT 
                      00262 ;
                      00263 ; Set up the USART for serial communications.
                      00264 ; The following global symbols need to be exported by the caller:
                      00265 ;       SIO_RX_BUFFER_START*    Starting addr of 256-byte Rx buffer
                      00266 ;       SIO_TX_BUFFER_START*    Starting addr of 256-byte Tx buffer
                      00267 ;       SIO_DATA_START          Starting addr of SIO module variables
MPASM  5.35beta                     SERIAL-IO.ASM   6-9-2012  1:09:17         PAGE  5


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00268 ;
                      00269 ; *must be aligned to the start of a 256-byte RAM bank
                      00270 ;
                      00271 ; AFFECTS:      RAM data bank
                      00272 ;       
                      00273 ;==============================================================================
                      00274 
                      00275         IF SIO_RX_BUFFER_START & 0xFF
                      00276                 ERROR "SIO_RX_BUFFER_START must be on a 256-byte RAM boundary."
                      00277         ENDIF
                      00278 
                      00279         IF SIO_TX_BUFFER_START & 0xFF
                      00280                 ERROR "SIO_TX_BUFFER_START must be on a 256-byte RAM boundary."
                      00281         ENDIF
                      00282         
000000                00283 SIO_INIT:
000000 0004           00284         CLRWDT
000002 0103           00285         BANKSEL SIO_DATA_START
                      00286 ;
                      00287 ; Set up I/O pins
                      00288 ;
000004 8E94           00289         BSF     TRISC, 7, ACCESS        ; RX pin on PORTC<7>
000006 9C94           00290         BCF     TRISC, 6, ACCESS        ; TX pin on PORTC<6>
                      00291 ;
                      00292 ; Set up EUSART for asynchronous serial I/O
                      00293 ;
                      00294 ; STEP 1. Set baud rate to SPBRGH:SPBRG
                      00295 ;
000008 0E06           00296         MOVLW   SIO_19200               ; default baud rate is 19.2k
00000A EC?? F???      00297         CALL    SIO_SET_BAUD_W
                      00298 ;
                      00299 ; STEP 2. Set up Tx/Rx buffers and other variables.
                      00300 ;
                      00301         ;
                      00302         ; Zero buffer contents (probably unnecessary, but I'm a purist)
                      00303         ;
00000E 010?           00304         BANKSEL TX_BUFFER
000010 0004           00305         CLRWDT
000012 EE?? F0??      00306         LFSR    FSR0, TX_BUFFER
000016                00307 CLR_NEXT_TX:
000016 6AEE           00308         CLRF    POSTINC0
000018 66E9           00309         TSTFSZ  FSR0L, ACCESS
00001A D???           00310         BRA     CLR_NEXT_TX
                      00311         
00001C 010?           00312         BANKSEL RX_BUFFER
00001E 0004           00313         CLRWDT
000020 EE?? F0??      00314         LFSR    FSR0, RX_BUFFER
000024                00315 CLR_NEXT_RX:
000024 6AEE           00316         CLRF    POSTINC0
000026 66E9           00317         TSTFSZ  FSR0L, ACCESS
000028 D???           00318         BRA     CLR_NEXT_RX
                      00319         ;
                      00320         ; Initialize buffer pointers and status register
                      00321         ;
00002A 0103           00322         BANKSEL SIO_DATA_START
00002C 6B00           00323         CLRF    SIO_STATUS, BANKED      ; all status bits default to cleared
00002E 6A??           00324         CLRF    TX_BUF_START            ; set start and end buffer pointers at
000030 6A??           00325         CLRF    TX_BUF_END              ; start of buffer (==buffer empty)
000032 6A??           00326         CLRF    RX_BUF_START
000034 6A??           00327         CLRF    RX_BUF_END
                      00328 ;
                      00329 ; STEP 3. Enable port and set modes.
                      00330 ;       
000036 0E90           00331         MOVLW   b'10010000'
                      00332                 ; 1-------      ; Serial I/O ON
                      00333                 ; -0------      ; RX9 disabled
                      00334                 ; --X-----      ; not used for async
                      00335                 ; ---1----      ; receiver enabled
                      00336                 ; ----0---      ; don't use address detection
                      00337                 ; -----0--      ; framing error detected
                      00338                 ; ------0-      ; overrun error detected
                      00339                 ; -------0      ; bit 9 if used
000038 6EAB           00340         MOVWF   RCSTA, ACCESS
00003A 0E24           00341         MOVLW   b'00100100'
                      00342                 ; X-------      ; Clock source (not used for async)
                      00343                 ; -0------      ; TX9 disabled
                      00344                 ; --1-----      ; transmitter enabled
                      00345                 ; ---0----      ; asynchronous mode selected
                      00346                 ; ----0---      ; not sending BREAK
                      00347                 ; -----1--      ; high-speed baud rate
                      00348                 ; ------X-      ; TX buffer status (R/0)
                      00349                 ; -------0      ; bit 9 if used
00003C 6EAC           00350         MOVWF   TXSTA, ACCESS
00003E 0E08           00351         MOVLW   b'00001000'
MPASM  5.35beta                     SERIAL-IO.ASM   6-9-2012  1:09:17         PAGE  6


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00352                 ; 0-------      ; auto-baud acquisition rollover status clear
                      00353                 ; -X------      ; receive idle status
                      00354                 ; --XX-X--      ; N/A
                      00355                 ; ----1---      ; 16-bit baud rate (SPBRGH:SPBRG)
                      00356                 ; ------0-      ; don't wake up on RX
                      00357                 ; -------0      ; don't detect baud rate
000040 6EB8           00358         MOVWF   BAUDCON, ACCESS
                      00359 ;
                      00360 ; STEP 4. Enable interrupts (DOES NOT enable global interrupts; that is
                      00361 ;         assumed to be under the caller's control)
                      00362 ;
000042 0012           00363         RETURN
                      00364 
                      00365 ;==============================================================================
                      00366 ; PUBLIC ENTRY POINTS FOR I/O
                      00367 ;==============================================================================
                      00368 ;
000044                00369 SIO_SET_BAUD_W:
000044 0103           00370         BANKSEL SIO_DATA_START
000046 0004           00371         CLRWDT
000048 6F00           00372         MOVWF   SIO_X, BANKED
00004A EC?? F???      00373         CALL    BAUDTBLH
00004E 6EB0           00374         MOVWF   SPBRGH, ACCESS
000050 5100           00375         MOVF    SIO_X, W, BANKED
000052 EC?? F???      00376         CALL    BAUDTBLL
000056 6EAF           00377         MOVWF   SPBRG, ACCESS
000058 0012           00378         RETURN
                      00379 
00005A                00380 SIO_ECHO_W:
00005A 0103           00381         BANKSEL SIO_DATA_START
00005C 6F00           00382         MOVWF   SIO_OUTPUT, BANKED
00005E                00383 SIO_ECHO:
00005E 0004           00384         CLRWDT
000060 0103           00385         BANKSEL SIO_DATA_START
000062 AF00           00386         BTFSS   SIO_OUTPUT, 7, BANKED   ; is char 7-bit clean?
000064 D???           00387         BRA     ECHO_7BITS              ; yes: skip this next bit
000066 0E4D           00388         MOVLW   'M'                     
000068 D???           00389         RCALL   SIO_PUTCHAR_W           ; output "M-" then the stripped char
00006A 0E2D           00390         MOVLW   '-'
00006C D???           00391         RCALL   SIO_PUTCHAR_W
00006E 9F00           00392         BCF     SIO_OUTPUT, 7, BANKED   ; strip high bit
000070                00393 ECHO_7BITS:
000070 0E7F           00394         MOVLW   0x7F                    ; is the character DELETE?
000072 6300           00395         CPFSEQ  SIO_OUTPUT, BANKED
000074 D???           00396         BRA     ECHO_NOT_DELETE         ; no: go on to next test
000076 0E5E           00397         MOVLW   '^'                     ; yes: print as "^?"
000078 D???           00398         RCALL   SIO_PUTCHAR_W
00007A 0E3F           00399         MOVLW   '?'
00007C 6F00           00400         MOVWF   SIO_OUTPUT, BANKED
00007E                00401 ECHO_NOT_DELETE:
00007E 0E1B           00402         MOVLW   0x1B                    ; is the character ESCAPE?
000080 6300           00403         CPFSEQ  SIO_OUTPUT, BANKED
000082 D???           00404         BRA     ECHO_NOT_ESCAPE         ; no: go on...
000084 0E24           00405         MOVLW   '$'
000086 6F00           00406         MOVWF   SIO_OUTPUT, BANKED      ; yes: print as "$"
000088                00407 ECHO_NOT_ESCAPE:
000088 AD00           00408         BTFSS   SIO_OUTPUT, 6, BANKED   ; is it a control character?
00008A BB00           00409         BTFSC   SIO_OUTPUT, 5, BANKED   ; (i.e., bits <7:5>=000)
00008C D???           00410         BRA     ECHO_PLAIN              ; no: print normally
00008E 0E5E           00411         MOVLW   '^'
000090 D???           00412         RCALL   SIO_PUTCHAR_W           ; yes: print as "^<char>"
000092 8D00           00413         BSF     SIO_OUTPUT, 6, BANKED   ; set bit 6 to shift to upper-case char
000094                00414 ECHO_PLAIN:
000094 5100           00415         MOVF    SIO_OUTPUT, W, BANKED   ; pick up final character to print
000096 D???           00416         RCALL   SIO_PUTCHAR_W           ; and output it.
000098 0012           00417         RETURN
                      00418 
00009A                00419 SIO_PUTCHAR:
00009A 0103           00420         BANKSEL SIO_DATA_START
00009C 5100           00421         MOVF    SIO_OUTPUT, W, BANKED
                      00422 
00009E                00423 SIO_PUTCHAR_W:
00009E 0004           00424         CLRWDT                                  
0000A0 0103           00425         BANKSEL SIO_DATA_START
0000A2 6F00           00426         MOVWF   TX_CHAR, BANKED                 
                      00427 
0000A4                00428 SPIN_FOR_BUF_DRAIN:
0000A4 A100           00429         BTFSS   SIO_STATUS, TXDATA_QUEUE, BANKED; Check to see if buffer full
0000A6 D???           00430         BRA     WRITE_OK                        ; OK because it's totally empty
0000A8 5100           00431         MOVF    TX_BUF_START, W, BANKED         ; Next check for START==END
0000AA 6300           00432         CPFSEQ  TX_BUF_END, BANKED
0000AC D???           00433         BRA     WRITE_OK                        ; START != END, so we're good.
0000AE D???           00434         BRA     SPIN_FOR_BUF_DRAIN              ; loop back until buffer not empty
                      00435 
MPASM  5.35beta                     SERIAL-IO.ASM   6-9-2012  1:09:17         PAGE  7


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

0000B0                00436 SIO_WRITE:
0000B0 0103           00437         BANKSEL SIO_DATA_START
0000B2 5100           00438         MOVF    SIO_OUTPUT, W, BANKED
                      00439 
0000B4                00440 SIO_WRITE_W:
0000B4 0004           00441         CLRWDT                                  
0000B6 0103           00442         BANKSEL SIO_DATA_START
0000B8 6F00           00443         MOVWF   TX_CHAR, BANKED                 
0000BA A100           00444         BTFSS   SIO_STATUS, TXDATA_QUEUE, BANKED; Check to see if buffer full
0000BC D???           00445         BRA     WRITE_OK                        ; OK because it's totally empty
0000BE 5100           00446         MOVF    TX_BUF_START, W, BANKED         ; Next check for START==END
0000C0 6300           00447         CPFSEQ  TX_BUF_END, BANKED
0000C2 D???           00448         BRA     WRITE_OK                        ; START != END, so we're good.
0000C4 8500           00449         BSF     SIO_STATUS, TXDATA_FULL, BANKED ; flag buffer as full and give up
0000C6 0012           00450         RETURN
                      00451         
0000C8                00452 WRITE_OK:                                       ; OK to write byte into next slot in the buffer
0000C8 C??? FFE1      00453         MOVFF   TX_BUF_END, FSR1L               ; load buffer pointer
0000CC 0E??           00454         MOVLW   HIGH(TX_BUFFER)
0000CE 6EE2           00455         MOVWF   FSR1H, ACCESS
0000D0 C??? FFE7      00456         MOVFF   TX_CHAR, INDF1                  ; move character into Tx buffer
0000D4 8100           00457         BSF     SIO_STATUS, TXDATA_QUEUE, BANKED; flag that data are in the buffer now
0000D6 2B00           00458         INCF    TX_BUF_END, F, BANKED           ; increment pointer (will wrap around)
0000D8 889D           00459         BSF     PIE1, TXIE, ACCESS              ; enable TX interrupt to send to H/W
0000DA 0012           00460         RETURN
                      00461 
0000DC                00462 SIO_NEWLINE:
0000DC 0004           00463         CLRWDT
0000DE 0E0D           00464         MOVLW   0x0D
0000E0 D???           00465         RCALL   SIO_PUTCHAR_W
0000E2 0E0A           00466         MOVLW   0x0A
0000E4 D???           00467         RCALL   SIO_PUTCHAR_W
0000E6 0012           00468         RETURN
                      00469 
                      00470 
0000E8                00471 SIO_READ_W:
0000E8 D???           00472         RCALL   SIO_READ
0000EA 5100           00473         MOVF    SIO_INPUT, W, BANKED
0000EC 0012           00474         RETURN
                      00475 
0000EE                00476 SIO_READ:
0000EE 0004           00477         CLRWDT
0000F0 0103           00478         BANKSEL SIO_DATA_START
0000F2 B300           00479         BTFSC   SIO_STATUS, RXDATA_QUEUE, BANKED; Is data waiting to be read?
0000F4 D???           00480         BRA     READ_OK                         ; yes, branch down to handle it
0000F6 6B00           00481         CLRF    SIO_INPUT, BANKED               ; no, return zero
0000F8 0012           00482         RETURN
                      00483 
0000FA                00484 READ_OK:                                        ; get next byte out of buffer
0000FA C??? FFE1      00485         MOVFF   RX_BUF_START, FSR1L             ; load buffer pointer
0000FE 0E??           00486         MOVLW   HIGH(RX_BUFFER)
000100 6EE2           00487         MOVWF   FSR1H, ACCESS
000102 CFE7 F???      00488         MOVFF   INDF1, SIO_INPUT                ; retrieve byte at start of buffer
000106 2B00           00489         INCF    RX_BUF_START, F, BANKED         ; advance pointer (will wrap around)
000108 5100           00490         MOVF    RX_BUF_START, W, BANKED         ; have we run out of data? (start == end)
00010A 6300           00491         CPFSEQ  RX_BUF_END, BANKED
00010C D???           00492         BRA     READ_DONE                       ; no, leave everything alone for next time
00010E 9300           00493         BCF     SIO_STATUS, RXDATA_QUEUE, BANKED; yes, clear the queue bit (buffer empty)
000110                00494 READ_DONE:
000110 0012           00495         RETURN
                      00496 
000112                00497 SIO_GETCHAR_W:
000112 D???           00498         RCALL   SIO_GETCHAR
000114 5100           00499         MOVF    SIO_INPUT, W, BANKED
000116 0012           00500         RETURN
                      00501 
000118                00502 SIO_GETCHAR:
000118 0103           00503         BANKSEL SIO_DATA_START
00011A 0004           00504 GC_SPIN CLRWDT
00011C A300           00505         BTFSS   SIO_STATUS, RXDATA_QUEUE, BANKED; wait here until data arrives
00011E D???           00506         BRA     GC_SPIN
000120 D???           00507         BRA     SIO_READ
                      00508 
                      00509 ;==============================================================================
                      00510 ; HIGHER LEVEL I/O FUNCIONS
                      00511 ;==============================================================================
                      00512 ;
                      00513 ; SIO_PRINT_HEX         Print value in SIO_OUTPUT as 2-digit hex value
                      00514 ; SIO_PRINT_HEX_W       Convenience function to take value from W (->SIO_OUTPUT)
                      00515 ;
000122                00516 SIO_PRINT_HEX_W:
000122 0103           00517         BANKSEL SIO_DATA_START
000124 6F00           00518         MOVWF   SIO_OUTPUT, BANKED
                      00519 
MPASM  5.35beta                     SERIAL-IO.ASM   6-9-2012  1:09:17         PAGE  8


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

000126                00520 SIO_PRINT_HEX:
000126 0004           00521         CLRWDT
000128 0103           00522         BANKSEL SIO_DATA_START
00012A C??? F???      00523         MOVFF   SIO_OUTPUT, SIO_X       ; Move value aside (we'll need SIO_OUTPUT)
00012E 3900           00524         SWAPF   SIO_X, W, BANKED        ; Get first nybble
000130 EC?? F???      00525         CALL    HEXTBL                  ; Convert to ASCII character in W
000134 EC?? F???      00526         CALL    SIO_PUTCHAR_W           ; and print
000138 5100           00527         MOVF    SIO_X, W, BANKED        ; Get last nybble
00013A EC?? F???      00528         CALL    HEXTBL                  ;
00013E EC?? F???      00529         CALL    SIO_PUTCHAR_W           ;
000142 0012           00530         RETURN
                      00531 
                      00532 ;
                      00533 ; 32-bit BCD and ASCII conversion routines
                      00534 ; derived (and then ported to PIC18 and modified by Steve Willoughby)
                      00535 ; from Microchip app note AN526 + modifications by Mike Keitz and
                      00536 ; Ron Kreymborg.  Contributed to the PIC developer community (PICList)
                      00537 ;
                      00538 ; B32__BIN2BCD   Convert 32-bit int to 10-digit BCD.
                      00539 ;       INPUT:  B32__BIN
                      00540 ;       OUTPUT: B32__BCD_ASC
                      00541 ;
000144                00542 B32__BIN2BCD:
000144 0103           00543         BANKSEL SIO_DATA_START
000146 0004           00544         CLRWDT
000148 0E20           00545         MOVLW   .32                     ; bits to convert
00014A 6F00           00546         MOVWF   B32__BIT, BANKED        ; cycle counter
00014C 6A??           00547         CLRF    B32__BCD_ASC
00014E 6A??           00548         CLRF    B32__BCD_ASC+1
000150 6A??           00549         CLRF    B32__BCD_ASC+2
000152 6A??           00550         CLRF    B32__BCD_ASC+3
000154 6A??           00551         CLRF    B32__BCD_ASC+4
000156 CFEA F???      00552         MOVFF   FSR0H, B32__FSR0H
00015A CFE9 F???      00553         MOVFF   FSR0L, B32__FSR0L
                      00554 
00015E                00555 B32__B2BCD_BIT:
00015E EE?? F0??      00556         LFSR    FSR0, B32__BCD_ASC
000162 0E05           00557         MOVLW   .5
000164 6F00           00558         MOVWF   B32__OUTCTR, BANKED
                      00559         
000166                00560 B32__B2BCD_LOOP:
000166 0004           00561         CLRWDT
000168 0E33           00562         MOVLW   0x33
00016A 26EF           00563         ADDWF   INDF0, F
00016C B6EF           00564         BTFSC   INDF0, 3                ; low result > 7?
00016E 0BF0           00565         ANDLW   0xF0                    ; yes: take 3 out
000170 BEEF           00566         BTFSC   INDF0, 7                ; high result > 7?
000172 0B0F           00567         ANDLW   0x0F                    ; yes
000174 5EEE           00568         SUBWF   POSTINC0, F             ; results <=7, subtract back
000176 2F00           00569         DECFSZ  B32__OUTCTR, F, BANKED  
000178 D???           00570         BRA     B32__B2BCD_LOOP
                      00571         ; 
                      00572         ; Get another bit by shifting the whole 32-bit value one bit to the left
                      00573         ; by cascading 8-bit shifts via carry (carry carries the bit across between
                      00574         ; them).
                      00575         ;                                   BIN[0]   BIN[1]   BIN[2]   BIN[3]
                      00576         ;                                  @bcdefgh ijklmnop qrstuvwx yzABCDEF
00017A 3700           00577         RLCF    B32__BIN+3, F, BANKED    ; @bcdefgh ijklmnop qrstuvwxyzABCDEF?
00017C 3700           00578         RLCF    B32__BIN+2, F, BANKED    ; @bcdefgh ijklmnopqrstuvwxy zABCDEF?
00017E 3700           00579         RLCF    B32__BIN+1, F, BANKED    ; @bcdefghijklmnopq rstuvwxy zABCDEF?
000180 3700           00580         RLCF    B32__BIN+0, F, BANKED    ;@bcdefghi jklmnopq rstuvwxy zABCDEF?
                      00581         ;                                 |____________________________________________
                      00582         ;                                                                              |
                      00583         ;                                   BCD[0]   BCD[1]   BCD[2]   BCD[3]   BCD[4] V
                      00584         ;                                  abcdefgh ijklmnop qrstuvwx yzABCDEF GHIJKLMN@
000182 3700           00585         RLCF    B32__BCD_ASC+4, F, BANKED; abcdefgh ijklmnop qrstuvwx yzABCDEFGHIJKLMN@
000184 3700           00586         RLCF    B32__BCD_ASC+3, F, BANKED; abcdefgh ijklmnop qrstuvwxyzABCDEFG HIJKLMN@
000186 3700           00587         RLCF    B32__BCD_ASC+2, F, BANKED; abcdefgh ijklmnopqrstuvwxy zABCDEFG HIJKLMN@
000188 3700           00588         RLCF    B32__BCD_ASC+1, F, BANKED; abcdefghijklmnopq rstuvwxy zABCDEFG HIJKLMN@
00018A 3700           00589         RLCF    B32__BCD_ASC+0, F, BANKED;abcdefghi jklmnopq rstuvwxy zABCDEFG HIJKLMN@
                      00590         ;                                  bcdefghi jklmnopq rstuvwxy zABCDEFG HIJKLMN@
00018C 2F00           00591         DECFSZ  B32__BIT, F, BANKED
00018E D???           00592         BRA     B32__B2BCD_BIT
000190 C??? FFEA      00593         MOVFF   B32__FSR0H, FSR0H
000194 C??? FFE9      00594         MOVFF   B32__FSR0L, FSR0L
000198 0012           00595         RETURN
                      00596         
                      00597 ;
                      00598 ; B32__BCD2ASCII
                      00599 ;
                      00600 ; Convert 10-digit BCD (in 5 bytes) to 10-character ASCII
                      00601 ; string
                      00602 ;
                      00603 ; buffer at B32__BCD_ASC:
MPASM  5.35beta                     SERIAL-IO.ASM   6-9-2012  1:09:17         PAGE  9


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00604 ;     ______________
                      00605 ;   0|BCD0      ASC0|  Modified in place
                      00606 ;   1|BCD1      ASC1|
                      00607 ;   2|BCD2 ---> ASC2|          /|\
                      00608 ;   3|BCD3      ASC3|           |
                      00609 ;   4|BCD4      ASC4| <-- SRC pointer FSR0
                      00610 ;   5|          ASC5|
                      00611 ;   6|          ASC6|
                      00612 ;   7|          ASC7|          /|\
                      00613 ;   8|          ASC8|           |
                      00614 ;   9|__________ASC9| <-- DST pointer FSR1
                      00615 ; 
                      00616 ;
00019A                00617 B32__BCD2ASCII:
00019A 0004           00618         CLRWDT
00019C 0103           00619         BANKSEL SIO_DATA_START
00019E CFEA F???      00620         MOVFF   FSR0H, B32__FSR0H               ; Save old FSR values
0001A2 CFE9 F???      00621         MOVFF   FSR0L, B32__FSR0L
0001A6 CFE2 F???      00622         MOVFF   FSR1H, B32__FSR1H
0001AA CFE1 F???      00623         MOVFF   FSR1L, B32__FSR1L
0001AE EE?? F0??      00624         LFSR    FSR0, B32__BCD_ASC+4            ; Set data pointers (src)
0001B2 EE?? F0??      00625         LFSR    FSR1, B32__BCD_ASC+9            ; (dst)
                      00626         
                      00627         
                      00628         
0001B6 0E05           00629         MOVLW   .5
0001B8 6F00           00630         MOVWF   B32__OUTCTR, BANKED
                      00631 
0001BA                00632 B32__BCD2A_LOOP:
0001BA 50EF           00633         MOVF    INDF0, W                        ; least significant digit
0001BC 0B0F           00634         ANDLW   0x0F
0001BE 0F30           00635         ADDLW   '0'
0001C0 6EE5           00636         MOVWF   POSTDEC1
0001C2 38ED           00637         SWAPF   POSTDEC0, W                     ; most significant digit
0001C4 0B0F           00638         ANDLW   0x0F
0001C6 0F30           00639         ADDLW   '0'
0001C8 6EE5           00640         MOVWF   POSTDEC1
0001CA 2F00           00641         DECFSZ  B32__OUTCTR, F, BANKED
0001CC D???           00642         BRA     B32__BCD2A_LOOP
0001CE C??? FFEA      00643         MOVFF   B32__FSR0H, FSR0H               ; Restore old FSR values
0001D2 C??? FFE9      00644         MOVFF   B32__FSR0L, FSR0L
0001D6 C??? FFE2      00645         MOVFF   B32__FSR1H, FSR1H
0001DA C??? FFE1      00646         MOVFF   B32__FSR1L, FSR1L
0001DE 0012           00647         RETURN
                      00648         
                      00649 
                      00650 
                      00651 
                      00652         
                      00653 
                      00654 ;==============================================================================
                      00655 ; LOW-LEVEL I/O
                      00656 ;
                      00657 ; These are generally called from interrupt service routines to handle the
                      00658 ; passing of data bytes between the buffers and the serial transceiver 
                      00659 ; hardware.
                      00660 ;
                      00661 ; SIO_RECV      Call this when you know there's a byte waiting to be read in
                      00662 ;               from the USART.
                      00663 ; SIO_SEND      Call this when you know there's a byte that needs to be sent
                      00664 ;               to the USART and it's ready to send it.
                      00665 ;
                      00666 ;==============================================================================
                      00667 
0001E0                00668 SIO_SEND:
0001E0 0004           00669         CLRWDT
0001E2 0103           00670         BANKSEL SIO_DATA_START
0001E4 B100           00671         BTFSC   SIO_STATUS, TXDATA_QUEUE, BANKED; Is data waiting to go out?
0001E6 D???           00672         BRA     TX_OK                           ; yes, branch down to handle it
0001E8 989D           00673         BCF     PIE1, TXIE, ACCESS              ; no, block TX interrupt until needed again
0001EA 0012           00674         RETURN
                      00675 
0001EC                00676 TX_OK:                                          ; push next byte out of buffer
0001EC CFE2 F???      00677         MOVFF   FSR1H, FSR1H_SAVE               ; save pointer (remember we're an ISR here)
0001F0 CFE1 F???      00678         MOVFF   FSR1L, FSR1L_SAVE
0001F4 C??? FFE1      00679         MOVFF   TX_BUF_START, FSR1L             ; load buffer pointer
0001F8 0E??           00680         MOVLW   HIGH(TX_BUFFER)
0001FA 6EE2           00681         MOVWF   FSR1H, ACCESS
0001FC CFE7 FFAD      00682         MOVFF   INDF1, TXREG                    ; transmit byte at buffer position
000200 2B00           00683         INCF    TX_BUF_START, F, BANKED         ; advance pointer (will wrap around)
000202 5100           00684         MOVF    TX_BUF_START, W, BANKED         ; have we run out of data? (start == end)
000204 6300           00685         CPFSEQ  TX_BUF_END, BANKED
000206 D???           00686         BRA     TX_DONE                         ; no, leave everything alone for next time
000208 9100           00687         BCF     SIO_STATUS, TXDATA_QUEUE, BANKED; yes, clear the queue bit (buffer empty)
MPASM  5.35beta                     SERIAL-IO.ASM   6-9-2012  1:09:17         PAGE 10


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

00020A                00688 TX_DONE:
00020A C??? FFE2      00689         MOVFF   FSR1H_SAVE, FSR1H               ; restore saved registers
00020E C??? FFE1      00690         MOVFF   FSR1L_SAVE, FSR1L
000212 0012           00691         RETURN
                      00692 
000214                00693 SIO_RECV:
000214 0004           00694         CLRWDT
000216 0103           00695         BANKSEL SIO_DATA_START
000218 B4AB           00696         BTFSC   RCSTA, FERR, ACCESS             ; Framing error?
00021A D???           00697         RCALL   ERR_FRAMING                     ; yes: go handle it.
00021C B2AB           00698         BTFSC   RCSTA, OERR, ACCESS             ; Overrun error?
00021E D???           00699         RCALL   ERR_OVERRUN                     ; yes: go handle that.
000220 A300           00700         BTFSS   SIO_STATUS, RXDATA_QUEUE, BANKED; Is there data already in the buffer?
000222 D???           00701         BRA     RX_OK                           ; no: go ahead and write into empty buffer
000224 5100           00702         MOVF    RX_BUF_START, W, BANKED         ; check for buffer full condition:
000226 6300           00703         CPFSEQ  RX_BUF_END, BANKED              ;   buf not empty but start==end
000228 D???           00704         BRA     RX_OK                           ; not full yet: go ahead and write
00022A 8700           00705         BSF     SIO_STATUS, RXDATA_FULL, BANKED ; FULL! flag the error and write nothing
00022C 50AE           00706         MOVF    RCREG, W, ACCESS                ; pull byte out of serial port and ignore it.
00022E 0012           00707         RETURN                                  ; (necessary or UART will flag an overrun state)
                      00708         
000230                00709 RX_OK:                                          ; OK to write byte into next slot in the buffer
000230 CFE2 F???      00710         MOVFF   FSR1H, FSR1H_SAVE               ; save pointer (remember we're an ISR here)
000234 CFE1 F???      00711         MOVFF   FSR1L, FSR1L_SAVE
000238 C??? FFE1      00712         MOVFF   RX_BUF_END, FSR1L               ; load buffer pointer
00023C 0E??           00713         MOVLW   HIGH(RX_BUFFER)
00023E 6EE2           00714         MOVWF   FSR1H, ACCESS
000240 CFAE FFE7      00715         MOVFF   RCREG, INDF1                    ; move received byte into buffer
000244 8300           00716         BSF     SIO_STATUS, RXDATA_QUEUE, BANKED; flag that data are in the buffer now
000246 2B00           00717         INCF    RX_BUF_END, F, BANKED           ; increment pointer (will wrap around)
000248 C??? FFE2      00718         MOVFF   FSR1H_SAVE, FSR1H               ; restore caller's FSR1 pointer
00024C C??? FFE1      00719         MOVFF   FSR1L_SAVE, FSR1L
000250 0012           00720         RETURN
                      00721 
000252                00722 ERR_FRAMING:
000252 8B00           00723         BSF     SIO_STATUS, SIO_FERR, BANKED    ; flag framing error for caller to handle
000254 0012           00724         RETURN                                  ; I believe this clears on next valid Rx byte
                      00725 
000256                00726 ERR_OVERRUN:
000256 8900           00727         BSF     SIO_STATUS, SIO_ORUN, BANKED    ; flag overrun error for caller to handle
000258 98AB           00728         BCF     RCSTA, CREN, ACCESS             ; reset error by disabling serial receiver
00025A 88AB           00729         BSF     RCSTA, CREN, ACCESS             ; and then enabling it again.
00025C 0012           00730         RETURN
                      00731         
                      00732 
                      00733 _SIO_LOOKUP_TABLES CODE SIO_TABLE_START
                      00734 HEXTBL  ORG     SIO_TABLE_START
                      00735         
015000 0B0F           00736         ANDLW   0x0F
015002 46E8           00737         RLNCF   WREG, F, ACCESS                 ; offset*2
015004 CFF9 F???      00738         MOVFF   PCL, SIO_TMPPC                  ; latch high bits of PC
015008 26F9           00739         ADDWF   PCL, F, ACCESS                  ; branch into table
01500A 0C30 0C31 0C32 00740         DT      "0123456789ABCDEF"
       0C33 0C34 0C35 
       0C36 0C37 0C38 
       0C39 0C41 0C42 
       0C43 0C44 0C45 
       0C46 
                      00741 
                      00742 ;   300 baud 8234
                      00743 ;   600 baud 4219       
                      00744 ;  1200 baud 208C
                      00745 ;  2400 baud 1045
                      00746 ;  4800 baud 0822
                      00747 ;  9600 baud 0410
                      00748 ; 19200 baud 0207
                      00749 ; 38400 baud 0103
                      00750 ; 57600 baud 00AC
                      00751 ;115200 baud 0055
                      00752 
01502A                00753 BAUDTBLH:
01502A 0B0F           00754         ANDLW   0x0F
01502C 46E8           00755         RLNCF   WREG, F, ACCESS
01502E CFF9 F???      00756         MOVFF   PCL, SIO_TMPPC
015032 26F9           00757         ADDWF   PCL, F, ACCESS
015034 0C82 0C42 0C20 00758         DT      0x82, 0x42, 0x20, 0x10, 0x08
       0C10 0C08 
01503E 0C04 0C02 0C01 00759         DT      0x04, 0x02, 0x01, 0x00, 0x00
       0C00 0C00 
015048 0C02 0C02 0C02 00760         DT      0x02, 0x02, 0x02, 0x02, 0x02, 0x02      ; fallback to 19.2k
       0C02 0C02 0C02 
015054                00761 BAUDTBLL:
015054 0B0F           00762         ANDLW   0x0F
015056 46E8           00763         RLNCF   WREG, F, ACCESS
MPASM  5.35beta                     SERIAL-IO.ASM   6-9-2012  1:09:17         PAGE 11


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

015058 CFF9 F???      00764         MOVFF   PCL, SIO_TMPPC
01505C 26F9           00765         ADDWF   PCL, F, ACCESS
01505E 0C34 0C19 0C8C 00766         DT      0x34, 0x19, 0x8C, 0x45, 0x22
       0C45 0C22 
015068 0C10 0C07 0C03 00767         DT      0x10, 0x07, 0x03, 0xAC, 0x55
       0CAC 0C55 
015072 0C07 0C07 0C07 00768         DT      0x07, 0x07, 0x07, 0x07, 0x07, 0x07      ; fallback to 19.2k
       0C07 0C07 0C07 
                      00769 
                      00770         
                      00771 ;==============================================================================
                      00772 ;==============================================================================
                      00773         END
MPASM  5.35beta                     SERIAL-IO.ASM   6-9-2012  1:09:17         PAGE 12


SYMBOL TABLE
  LABEL                             VALUE 

A                                 00000000
ABAT                              00000004
ABDEN                             00000000
ABDOVF                            00000007
ACCESS                            00000000
ACKDT                             00000005
ACKEN                             00000004
ACKSTAT                           00000006
ACQT0                             00000003
ACQT1                             00000004
ACQT2                             00000005
ADCON0                            00000FC2
ADCON1                            00000FC1
ADCON2                            00000FC0
ADCS0                             00000000
ADCS1                             00000001
ADCS2                             00000002
ADDEN                             00000003
ADEN                              00000003
ADFM                              00000007
ADIE                              00000006
ADIF                              00000006
ADIP                              00000006
ADON                              00000000
ADRES                             00000FC3
ADRESH                            00000FC4
ADRESL                            00000FC3
AN0                               00000000
AN1                               00000001
AN10                              00000000
AN2                               00000002
AN3                               00000003
AN4                               00000005
AN5                               00000000
AN6                               00000001
AN7                               00000002
AN8                               00000001
AN9                               00000004
B0CON                             00000E20
B0D0                              00000E26
B0D00                             00000000
B0D01                             00000001
B0D02                             00000002
B0D03                             00000003
B0D04                             00000004
B0D05                             00000005
B0D06                             00000006
B0D07                             00000007
B0D1                              00000E27
B0D10                             00000000
B0D11                             00000001
B0D12                             00000002
B0D13                             00000003
B0D14                             00000004
B0D15                             00000005
B0D16                             00000006
B0D17                             00000007
B0D2                              00000E28
B0D20                             00000000
B0D21                             00000001
B0D22                             00000002
B0D23                             00000003
B0D24                             00000004
B0D25                             00000005
B0D26                             00000006
B0D27                             00000007
B0D3                              00000E29
B0D30                             00000000
B0D31                             00000001
B0D32                             00000002
B0D33                             00000003
B0D34                             00000004
B0D35                             00000005
B0D36                             00000006
B0D37                             00000007
B0D4                              00000E2A
B0D40                             00000000
B0D41                             00000001
B0D42                             00000002
B0D43                             00000003
B0D44                             00000004
B0D45                             00000005
B0D46                             00000006
B0D47                             00000007
MPASM  5.35beta                     SERIAL-IO.ASM   6-9-2012  1:09:17         PAGE 13


SYMBOL TABLE
  LABEL                             VALUE 

B0D5                              00000E2B
B0D50                             00000000
B0D51                             00000001
B0D52                             00000002
B0D53                             00000003
B0D54                             00000004
B0D55                             00000005
B0D56                             00000006
B0D57                             00000007
B0D6                              00000E2C
B0D60                             00000000
B0D61                             00000001
B0D62                             00000002
B0D63                             00000003
B0D64                             00000004
B0D65                             00000005
B0D66                             00000006
B0D67                             00000007
B0D7                              00000E2D
B0D70                             00000000
B0D71                             00000001
B0D72                             00000002
B0D73                             00000003
B0D74                             00000004
B0D75                             00000005
B0D76                             00000006
B0D77                             00000007
B0DLC                             00000E25
B0EIDH                            00000E23
B0EIDL                            00000E24
B0IE                              00000002
B0SIDH                            00000E21
B0SIDL                            00000E22
B0TXEN                            00000002
B1CON                             00000E30
B1D0                              00000E36
B1D00                             00000000
B1D01                             00000001
B1D02                             00000002
B1D03                             00000003
B1D04                             00000004
B1D05                             00000005
B1D06                             00000006
B1D07                             00000007
B1D1                              00000E37
B1D10                             00000000
B1D11                             00000001
B1D12                             00000002
B1D13                             00000003
B1D14                             00000004
B1D15                             00000005
B1D16                             00000006
B1D17                             00000007
B1D2                              00000E38
B1D20                             00000000
B1D21                             00000001
B1D22                             00000002
B1D23                             00000003
B1D24                             00000004
B1D25                             00000005
B1D26                             00000006
B1D27                             00000007
B1D3                              00000E39
B1D30                             00000000
B1D31                             00000001
B1D32                             00000002
B1D33                             00000003
B1D34                             00000004
B1D35                             00000005
B1D36                             00000006
B1D37                             00000007
B1D4                              00000E3A
B1D40                             00000000
B1D41                             00000001
B1D42                             00000002
B1D43                             00000003
B1D44                             00000004
B1D45                             00000005
B1D46                             00000006
B1D47                             00000007
B1D5                              00000E3B
B1D50                             00000000
B1D51                             00000001
B1D52                             00000002
MPASM  5.35beta                     SERIAL-IO.ASM   6-9-2012  1:09:17         PAGE 14


SYMBOL TABLE
  LABEL                             VALUE 

B1D53                             00000003
B1D54                             00000004
B1D55                             00000005
B1D56                             00000006
B1D57                             00000007
B1D6                              00000E3C
B1D60                             00000000
B1D61                             00000001
B1D62                             00000002
B1D63                             00000003
B1D64                             00000004
B1D65                             00000005
B1D66                             00000006
B1D67                             00000007
B1D7                              00000E3D
B1D70                             00000000
B1D71                             00000001
B1D72                             00000002
B1D73                             00000003
B1D74                             00000004
B1D75                             00000005
B1D76                             00000006
B1D77                             00000007
B1DLC                             00000E35
B1EIDH                            00000E33
B1EIDL                            00000E34
B1IE                              00000003
B1SIDH                            00000E31
B1SIDL                            00000E32
B1TXEN                            00000003
B2CON                             00000E40
B2D0                              00000E46
B2D00                             00000000
B2D01                             00000001
B2D02                             00000002
B2D03                             00000003
B2D04                             00000004
B2D05                             00000005
B2D06                             00000006
B2D07                             00000007
B2D1                              00000E47
B2D10                             00000000
B2D11                             00000001
B2D12                             00000002
B2D13                             00000003
B2D14                             00000004
B2D15                             00000005
B2D16                             00000006
B2D17                             00000007
B2D2                              00000E48
B2D20                             00000000
B2D21                             00000001
B2D22                             00000002
B2D23                             00000003
B2D24                             00000004
B2D25                             00000005
B2D26                             00000006
B2D27                             00000007
B2D3                              00000E49
B2D30                             00000000
B2D31                             00000001
B2D32                             00000002
B2D33                             00000003
B2D34                             00000004
B2D35                             00000005
B2D36                             00000006
B2D37                             00000007
B2D4                              00000E4A
B2D40                             00000000
B2D41                             00000001
B2D42                             00000002
B2D43                             00000003
B2D44                             00000004
B2D45                             00000005
B2D46                             00000006
B2D47                             00000007
B2D5                              00000E4B
B2D50                             00000000
B2D51                             00000001
B2D52                             00000002
B2D53                             00000003
B2D54                             00000004
B2D55                             00000005
B2D56                             00000006
MPASM  5.35beta                     SERIAL-IO.ASM   6-9-2012  1:09:17         PAGE 15


SYMBOL TABLE
  LABEL                             VALUE 

B2D57                             00000007
B2D6                              00000E4C
B2D60                             00000000
B2D61                             00000001
B2D62                             00000002
B2D63                             00000003
B2D64                             00000004
B2D65                             00000005
B2D66                             00000006
B2D67                             00000007
B2D7                              00000E4D
B2D70                             00000000
B2D71                             00000001
B2D72                             00000002
B2D73                             00000003
B2D74                             00000004
B2D75                             00000005
B2D76                             00000006
B2D77                             00000007
B2DLC                             00000E45
B2EIDH                            00000E43
B2EIDL                            00000E44
B2IE                              00000004
B2SIDH                            00000E41
B2SIDL                            00000E42
B2TXEN                            00000004
B32__B2BCD_BIT                    0000015E
B32__B2BCD_LOOP                   00000166
B32__BCD2ASCII                    0000019A
B32__BCD2A_LOOP                   000001BA
B32__BCD_ASC                      00000312
B32__BIN                          00000317
B32__BIN2BCD                      00000144
B32__BIT                          0000030C
B32__FSR0H                        0000030E
B32__FSR0L                        0000030F
B32__FSR1H                        00000310
B32__FSR1L                        00000311
B32__OUTCTR                       0000030D
B3CON                             00000E50
B3D0                              00000E56
B3D00                             00000000
B3D01                             00000001
B3D02                             00000002
B3D03                             00000003
B3D04                             00000004
B3D05                             00000005
B3D06                             00000006
B3D07                             00000007
B3D1                              00000E57
B3D10                             00000000
B3D11                             00000001
B3D12                             00000002
B3D13                             00000003
B3D14                             00000004
B3D15                             00000005
B3D16                             00000006
B3D17                             00000007
B3D2                              00000E58
B3D20                             00000000
B3D21                             00000001
B3D22                             00000002
B3D23                             00000003
B3D24                             00000004
B3D25                             00000005
B3D26                             00000006
B3D27                             00000007
B3D3                              00000E59
B3D30                             00000000
B3D31                             00000001
B3D32                             00000002
B3D33                             00000003
B3D34                             00000004
B3D35                             00000005
B3D36                             00000006
B3D37                             00000007
B3D4                              00000E5A
B3D40                             00000000
B3D41                             00000001
B3D42                             00000002
B3D43                             00000003
B3D44                             00000004
B3D45                             00000005
B3D46                             00000006
MPASM  5.35beta                     SERIAL-IO.ASM   6-9-2012  1:09:17         PAGE 16


SYMBOL TABLE
  LABEL                             VALUE 

B3D47                             00000007
B3D5                              00000E5B
B3D50                             00000000
B3D51                             00000001
B3D52                             00000002
B3D53                             00000003
B3D54                             00000004
B3D55                             00000005
B3D56                             00000006
B3D57                             00000007
B3D6                              00000E5C
B3D60                             00000000
B3D61                             00000001
B3D62                             00000002
B3D63                             00000003
B3D64                             00000004
B3D65                             00000005
B3D66                             00000006
B3D67                             00000007
B3D7                              00000E5D
B3D70                             00000000
B3D71                             00000001
B3D72                             00000002
B3D73                             00000003
B3D74                             00000004
B3D75                             00000005
B3D76                             00000006
B3D77                             00000007
B3DLC                             00000E55
B3EIDH                            00000E53
B3EIDL                            00000E54
B3IE                              00000005
B3SIDH                            00000E51
B3SIDL                            00000E52
B3TXEN                            00000005
B46D77                            00000007
B4CON                             00000E60
B4D0                              00000E66
B4D00                             00000000
B4D01                             00000001
B4D02                             00000002
B4D03                             00000003
B4D04                             00000004
B4D05                             00000005
B4D06                             00000006
B4D07                             00000007
B4D1                              00000E67
B4D10                             00000000
B4D11                             00000001
B4D12                             00000002
B4D13                             00000003
B4D14                             00000004
B4D15                             00000005
B4D16                             00000006
B4D17                             00000007
B4D2                              00000E68
B4D20                             00000000
B4D21                             00000001
B4D22                             00000002
B4D23                             00000003
B4D24                             00000004
B4D25                             00000005
B4D26                             00000006
B4D27                             00000007
B4D3                              00000E69
B4D30                             00000000
B4D31                             00000001
B4D32                             00000002
B4D33                             00000003
B4D34                             00000004
B4D35                             00000005
B4D36                             00000006
B4D37                             00000007
B4D4                              00000E6A
B4D40                             00000000
B4D41                             00000001
B4D42                             00000002
B4D43                             00000003
B4D44                             00000004
B4D45                             00000005
B4D46                             00000006
B4D47                             00000007
B4D5                              00000E6B
B4D50                             00000000
MPASM  5.35beta                     SERIAL-IO.ASM   6-9-2012  1:09:17         PAGE 17


SYMBOL TABLE
  LABEL                             VALUE 

B4D51                             00000001
B4D52                             00000002
B4D53                             00000003
B4D54                             00000004
B4D55                             00000005
B4D56                             00000006
B4D57                             00000007
B4D6                              00000E6C
B4D60                             00000000
B4D61                             00000001
B4D62                             00000002
B4D63                             00000003
B4D64                             00000004
B4D65                             00000005
B4D66                             00000006
B4D67                             00000007
B4D7                              00000E6D
B4D70                             00000000
B4D71                             00000001
B4D72                             00000002
B4D73                             00000003
B4D74                             00000004
B4D75                             00000005
B4D76                             00000006
B4D77                             00000007
B4DLC                             00000E65
B4EIDH                            00000E63
B4EIDL                            00000E64
B4IE                              00000006
B4SIDH                            00000E61
B4SIDL                            00000E62
B4TXEN                            00000006
B57D07                            00000007
B57D23                            00000003
B5CON                             00000E70
B5D0                              00000E76
B5D00                             00000000
B5D01                             00000001
B5D02                             00000002
B5D03                             00000003
B5D04                             00000004
B5D05                             00000005
B5D06                             00000006
B5D07                             00000007
B5D1                              00000E77
B5D10                             00000000
B5D11                             00000001
B5D12                             00000002
B5D13                             00000003
B5D14                             00000004
B5D15                             00000005
B5D16                             00000006
B5D17                             00000007
B5D2                              00000E78
B5D20                             00000000
B5D21                             00000001
B5D22                             00000002
B5D23                             00000003
B5D24                             00000004
B5D25                             00000005
B5D26                             00000006
B5D27                             00000007
B5D3                              00000E79
B5D30                             00000000
B5D31                             00000001
B5D32                             00000002
B5D33                             00000003
B5D34                             00000004
B5D35                             00000005
B5D36                             00000006
B5D37                             00000007
B5D4                              00000E7A
B5D40                             00000000
B5D41                             00000001
B5D42                             00000002
B5D43                             00000003
B5D44                             00000004
B5D45                             00000005
B5D46                             00000006
B5D47                             00000007
B5D5                              00000E7B
B5D50                             00000000
B5D51                             00000001
B5D52                             00000002
MPASM  5.35beta                     SERIAL-IO.ASM   6-9-2012  1:09:17         PAGE 18


SYMBOL TABLE
  LABEL                             VALUE 

B5D53                             00000003
B5D54                             00000004
B5D55                             00000005
B5D56                             00000006
B5D57                             00000007
B5D6                              00000E7C
B5D60                             00000000
B5D61                             00000001
B5D62                             00000002
B5D63                             00000003
B5D64                             00000004
B5D65                             00000005
B5D66                             00000006
B5D67                             00000007
B5D7                              00000E7D
B5D70                             00000000
B5D71                             00000001
B5D72                             00000002
B5D73                             00000003
B5D74                             00000004
B5D75                             00000005
B5D76                             00000006
B5D77                             00000007
B5DLC                             00000E75
B5EIDH                            00000E73
B5EIDL                            00000E74
B5IE                              00000007
B5SIDH                            00000E71
B5SIDL                            00000E72
B5TXEN                            00000007
BANKED                            00000001
BAUDCON                           00000FB8
BAUDTBLH                          0001502A
BAUDTBLL                          00015054
BCLIE                             00000003
BCLIF                             00000003
BCLIP                             00000003
BF                                00000000
BGST                              00000005
BIE0                              00000DFA
BOR                               00000000
BRG16                             00000003
BRGCON1                           00000F70
BRGCON2                           00000F71
BRGCON3                           00000F72
BRGH                              00000002
BRP0                              00000000
BRP1                              00000001
BRP2                              00000002
BRP3                              00000003
BRP4                              00000004
BRP5                              00000005
BSEL0                             00000DF8
BSR                               00000FE0
C                                 00000000
C1INA                             00000001
C1INB                             00000000
C1INV                             00000004
C1OUT                             00000006
C2INA                             00000003
C2INB                             00000002
C2INV                             00000005
C2OUT                             00000007
CANCAP                            00000004
CANCON                            00000F6F
CANCON_RO0                        00000F5F
CANCON_RO1                        00000F4F
CANCON_RO2                        00000F3F
CANCON_RO3                        00000F2F
CANCON_RO4                        00000E7F
CANCON_RO5                        00000E6F
CANCON_RO6                        00000E5F
CANCON_RO7                        00000E4F
CANCON_RO8                        00000E3F
CANCON_RO9                        00000E2F
CANRX                             00000003
CANSTAT                           00000F6E
CANSTAT_RO0                       00000F5E
CANSTAT_RO1                       00000F4E
CANSTAT_RO2                       00000F3E
CANSTAT_RO3                       00000F2E
CANSTAT_RO4                       00000E7E
CANSTAT_RO5                       00000E6E
CANSTAT_RO6                       00000E5E
MPASM  5.35beta                     SERIAL-IO.ASM   6-9-2012  1:09:17         PAGE 19


SYMBOL TABLE
  LABEL                             VALUE 

CANSTAT_RO7                       00000E4E
CANSTAT_RO8                       00000E3E
CANSTAT_RO9                       00000E2E
CANTX                             00000002
CCP1                              00000002
CCP1CON                           00000FBD
CCP1IE                            00000002
CCP1IF                            00000002
CCP1IP                            00000002
CCP1M0                            00000000
CCP1M1                            00000001
CCP1M2                            00000002
CCP1M3                            00000003
CCPR1                             00000FBE
CCPR1H                            00000FBF
CCPR1L                            00000FBE
CFGS                              00000006
CHS0                              00000002
CHS1                              00000003
CHS2                              00000004
CHS3                              00000005
CIOCON                            00000F73
CIS                               00000003
CK                                00000006
CKE                               00000006
CKP                               00000004
CLKI                              00000007
CLKO                              00000006
CLR_NEXT_RX                       00000024
CLR_NEXT_TX                       00000016
CM0                               00000000
CM1                               00000001
CM2                               00000002
CMCON                             00000FB4
CMIE                              00000006
CMIF                              00000006
CMIP                              00000006
COMSTAT                           00000F74
CREN                              00000004
CS                                00000002
CSRC                              00000007
CVR0                              00000000
CVR1                              00000001
CVR2                              00000002
CVR3                              00000003
CVRCON                            00000FB5
CVREF_CVRCON                      00000004
CVREF_PORTA                       00000000
CVREN                             00000007
CVROE                             00000006
CVRR                              00000005
CVRSS                             00000004
D                                 00000005
DATA_ADDRESS                      00000005
DC                                00000001
DC1B0                             00000004
DC1B1                             00000005
DDRA                              TRISA
DDRB                              TRISB
DDRC                              TRISC
DDRD                              TRISD
DDRE                              TRISE
DFLC0                             00000000
DFLC1                             00000001
DFLC2                             00000002
DFLC3                             00000003
DFLC4                             00000004
DLC0                              00000000
DLC1                              00000001
DLC2                              00000002
DLC3                              00000003
DONE                              00000001
D_A                               00000005
ECANCON                           00000F77
ECCP1                             00000004
ECCP1AS                           00000FB6
ECCP1CON                          00000FBA
ECCP1DEL                          00000FB7
ECCP1IE                           00000000
ECCP1IF                           00000000
ECCP1IP                           00000000
ECCP1M0                           00000000
ECCP1M1                           00000001
ECCP1M2                           00000002
MPASM  5.35beta                     SERIAL-IO.ASM   6-9-2012  1:09:17         PAGE 20


SYMBOL TABLE
  LABEL                             VALUE 

ECCP1M3                           00000003
ECCPAS0                           00000004
ECCPAS1                           00000005
ECCPAS2                           00000006
ECCPASE                           00000007
ECCPR1                            00000FBB
ECCPR1H                           00000FBC
ECCPR1L                           00000FBB
ECHO_7BITS                        00000070
ECHO_NOT_DELETE                   0000007E
ECHO_NOT_ESCAPE                   00000088
ECHO_PLAIN                        00000094
EDC1B0                            00000004
EDC1B1                            00000005
EEADR                             00000FA9
EEADRH                            00000FAA
EECON1                            00000FA6
EECON2                            00000FA7
EEDATA                            00000FA8
EEIE                              00000004
EEIF                              00000004
EEIP                              00000004
EEPGD                             00000007
EICODE0                           00000000
EICODE1                           00000001
EICODE2                           00000002
EICODE3                           00000003
EICODE4                           00000004
EID0                              00000000
EID1                              00000001
EID10                             00000002
EID11                             00000003
EID12                             00000004
EID13                             00000005
EID14                             00000006
EID15                             00000007
EID16                             00000000
EID17                             00000001
EID2                              00000002
EID3                              00000003
EID4                              00000004
EID5                              00000005
EID6                              00000006
EID7                              00000007
EID8                              00000000
EID9                              00000001
ENDRHI                            00000005
EPWM1M0                           00000006
EPWM1M1                           00000007
ERRIE                             00000005
ERRIF                             00000005
ERRIP                             00000005
ERR_FRAMING                       00000252
ERR_OVERRUN                       00000256
EWARN                             00000000
EWIN0                             00000000
EWIN1                             00000001
EWIN2                             00000002
EWIN3                             00000003
EWIN4                             00000004
EXID                              00000003
EXIDE                             00000003
EXIDEN                            00000003
F                                 00000005
F0BP_0                            00000000
F0BP_1                            00000001
F0BP_2                            00000002
F0BP_3                            00000003
F10BP_0                           00000000
F10BP_1                           00000001
F10BP_2                           00000002
F10BP_3                           00000003
F11BP_0                           00000004
F11BP_1                           00000005
F11BP_2                           00000006
F11BP_3                           00000007
F12BP_0                           00000000
F12BP_1                           00000001
F12BP_2                           00000002
F12BP_3                           00000003
F13BP_0                           00000004
F13BP_1                           00000005
F13BP_2                           00000006
F13BP_3                           00000007
MPASM  5.35beta                     SERIAL-IO.ASM   6-9-2012  1:09:17         PAGE 21


SYMBOL TABLE
  LABEL                             VALUE 

F14BP_0                           00000000
F14BP_1                           00000001
F14BP_2                           00000002
F14BP_3                           00000003
F15BP_0                           00000004
F15BP_1                           00000005
F15BP_2                           00000006
F15BP_3                           00000007
F1BP_0                            00000004
F1BP_1                            00000005
F1BP_2                            00000006
F1BP_3                            00000007
F2BP_0                            00000000
F2BP_1                            00000001
F2BP_2                            00000002
F2BP_3                            00000003
F3BP_0                            00000004
F3BP_1                            00000005
F3BP_2                            00000006
F3BP_3                            00000007
F4BP_0                            00000000
F4BP_1                            00000001
F4BP_2                            00000002
F4BP_3                            00000003
F5BP_0                            00000004
F5BP_1                            00000005
F5BP_2                            00000006
F5BP_3                            00000007
F6BP_0                            00000000
F6BP_1                            00000001
F6BP_2                            00000002
F6BP_3                            00000003
F7BP_0                            00000004
F7BP_1                            00000005
F7BP_2                            00000006
F7BP_3                            00000007
F8BP_0                            00000000
F8BP_1                            00000001
F8BP_2                            00000002
F8BP_3                            00000003
F9BP_0                            00000004
F9BP_1                            00000005
F9BP_2                            00000006
F9BP_3                            00000007
FAST                              00000001
FERR                              00000002
FIFOEMPTY                         00000007
FIFOMWIE                          00000000
FIFOWM                            00000005
FIFOWMIE                          00000000
FIFOWMIF                          00000000
FIFOWMIP                          00000000
FIL0_0                            00000000
FIL0_1                            00000001
FIL10_0                           00000004
FIL10_1                           00000005
FIL11_0                           00000006
FIL11_1                           00000007
FIL12_0                           00000000
FIL12_1                           00000001
FIL13_0                           00000002
FIL13_1                           00000003
FIL14_0                           00000004
FIL14_1                           00000005
FIL15_0                           00000006
FIL15_1                           00000007
FIL1_0                            00000002
FIL1_1                            00000003
FIL2_0                            00000004
FIL2_1                            00000005
FIL3_0                            00000006
FIL3_1                            00000007
FIL4_0                            00000000
FIL4_1                            00000001
FIL5_0                            00000002
FIL5_1                            00000003
FIL6_0                            00000004
FIL6_1                            00000005
FIL7_0                            00000006
FIL7_1                            00000007
FIL8_0                            00000000
FIL8_1                            00000001
FIL9_0                            00000002
FIL9_1                            00000003
MPASM  5.35beta                     SERIAL-IO.ASM   6-9-2012  1:09:17         PAGE 22


SYMBOL TABLE
  LABEL                             VALUE 

FILHIT0                           00000000
FILHIT1                           00000001
FILHIT2                           00000002
FILHIT3                           00000003
FILHIT4                           00000004
FLC0                              00000000
FLC1                              00000001
FLC2                              00000002
FLC3                              00000003
FLC4                              00000004
FLT0                              00000000
FP0                               00000000
FP1                               00000001
FP2                               00000002
FP3                               00000003
FREE                              00000004
FSR0                              00000000
FSR0H                             00000FEA
FSR0L                             00000FE9
FSR1                              00000001
FSR1H                             00000FE2
FSR1H_SAVE                        0000030A
FSR1L                             00000FE1
FSR1L_SAVE                        0000030B
FSR2                              00000002
FSR2H                             00000FDA
FSR2L                             00000FD9
GCEN                              00000007
GC_SPIN                           0000011A
GIE                               00000007
GIEH                              00000007
GIEL                              00000006
GO                                00000001
GO_DONE                           00000001
HEXTBL                            00015000
HLVDCON                           00000FD2
HLVDEN                            00000004
HLVDIE                            00000002
HLVDIF                            00000002
HLVDIN                            00000005
HLVDIP                            00000002
HLVDL0                            00000000
HLVDL1                            00000001
HLVDL2                            00000002
HLVDL3                            00000003
I2C_DAT                           00000005
I2C_READ                          00000002
I2C_START                         00000003
I2C_STOP                          00000004
IBF                               00000007
IBOV                              00000005
ICODE0                            00000000
ICODE1                            00000001
ICODE2                            00000002
ICODE3                            00000003
ICODE4                            00000004
IDLEN                             00000007
INDF0                             00000FEF
INDF1                             00000FE7
INDF2                             00000FDF
INT0                              00000000
INT0E                             00000004
INT0F                             00000001
INT0IE                            00000004
INT0IF                            00000001
INT1                              00000001
INT1E                             00000003
INT1F                             00000000
INT1IE                            00000003
INT1IF                            00000000
INT1IP                            00000006
INT1P                             00000006
INT2                              00000002
INT2E                             00000004
INT2F                             00000001
INT2IE                            00000004
INT2IF                            00000001
INT2IP                            00000007
INT2P                             00000007
INTCON                            00000FF2
INTCON2                           00000FF1
INTCON3                           00000FF0
INTEDG0                           00000006
INTEDG1                           00000005
MPASM  5.35beta                     SERIAL-IO.ASM   6-9-2012  1:09:17         PAGE 23


SYMBOL TABLE
  LABEL                             VALUE 

INTEDG2                           00000004
INTSCR                            00000007
INTSRC                            00000007
IOFS                              00000002
IPEN                              00000007
IPR1                              00000F9F
IPR2                              00000FA2
IPR3                              00000FA5
IRCF0                             00000004
IRCF1                             00000005
IRCF2                             00000006
IRVST                             00000005
IRXIE                             00000007
IRXIF                             00000007
IRXIP                             00000007
IVRST                             00000005
JTOFF                             00000001
KBI0                              00000004
KBI1                              00000005
KBI2                              00000006
KBI3                              00000007
LATA                              00000F89
LATA0                             00000000
LATA1                             00000001
LATA2                             00000002
LATA3                             00000003
LATA4                             00000004
LATA5                             00000005
LATA6                             00000006
LATA7                             00000007
LATB                              00000F8A
LATB0                             00000000
LATB1                             00000001
LATB2                             00000002
LATB3                             00000003
LATB4                             00000004
LATB5                             00000005
LATB6                             00000006
LATB7                             00000007
LATC                              00000F8B
LATC0                             00000000
LATC1                             00000001
LATC2                             00000002
LATC3                             00000003
LATC4                             00000004
LATC5                             00000005
LATC6                             00000006
LATC7                             00000007
LATD                              00000F8C
LATD0                             00000000
LATD1                             00000001
LATD2                             00000002
LATD3                             00000003
LATD4                             00000004
LATD5                             00000005
LATD6                             00000006
LATD7                             00000007
LATE                              00000F8D
LATE0                             00000000
LATE1                             00000001
LATE2                             00000002
LVDCON                            00000FD2
LVDEN                             00000004
LVDIE                             00000002
LVDIF                             00000002
LVDIN                             00000005
LVDIP                             00000002
LVDL0                             00000000
LVDL1                             00000001
LVDL2                             00000002
LVDL3                             00000003
LVV0                              00000000
LVV1                              00000001
LVV2                              00000002
LVV3                              00000003
MDSEL0                            00000006
MDSEL1                            00000007
MSEL0                             00000DF0
MSEL1                             00000DF1
MSEL2                             00000DF2
MSEL3                             00000DF3
N                                 00000004
NOT_A                             00000005
NOT_ADDRESS                       00000005
MPASM  5.35beta                     SERIAL-IO.ASM   6-9-2012  1:09:17         PAGE 24


SYMBOL TABLE
  LABEL                             VALUE 

NOT_BOR                           00000000
NOT_CS                            00000002
NOT_DONE                          00000001
NOT_PD                            00000002
NOT_POR                           00000001
NOT_RBPU                          00000007
NOT_RD                            00000000
NOT_RI                            00000004
NOT_SS                            00000005
NOT_T1SYNC                        00000002
NOT_T3SYNC                        00000002
NOT_TO                            00000003
NOT_W                             00000002
NOT_WR                            00000001
NOT_WRITE                         00000002
OBF                               00000006
OERR                              00000001
OPMODE                            00000005
OPMODE0                           00000005
OPMODE1                           00000006
OPMODE2                           00000007
OSC1                              00000007
OSC2                              00000006
OSCCON                            00000FD3
OSCFIE                            00000007
OSCFIF                            00000007
OSCFIP                            00000007
OSCTUNE                           00000F9B
OSTS                              00000003
OV                                00000003
P                                 00000004
P1A                               00000004
P1B                               00000005
P1C                               00000006
P1D                               00000007
PC                                00000FF9
PCFG0                             00000000
PCFG1                             00000001
PCFG2                             00000002
PCFG3                             00000003
PCL                               00000FF9
PCLATH                            00000FFA
PCLATU                            00000FFB
PD                                00000002
PDC0                              00000000
PDC1                              00000001
PDC2                              00000002
PDC3                              00000003
PDC4                              00000004
PDC5                              00000005
PDC6                              00000006
PEIE                              00000006
PEN                               00000002
PGC                               00000006
PGD                               00000007
PGM                               00000005
PIE1                              00000F9D
PIE2                              00000FA0
PIE3                              00000FA3
PIR1                              00000F9E
PIR2                              00000FA1
PIR3                              00000FA4
PLLEN                             00000006
PLUSW0                            00000FEB
PLUSW1                            00000FE3
PLUSW2                            00000FDB
POR                               00000001
PORTA                             00000F80
PORTB                             00000F81
PORTC                             00000F82
PORTD                             00000F83
PORTE                             00000F84
POSTDEC0                          00000FED
POSTDEC1                          00000FE5
POSTDEC2                          00000FDD
POSTINC0                          00000FEE
POSTINC1                          00000FE6
POSTINC2                          00000FDE
PR2                               00000FCB
PREINC0                           00000FEC
PREINC1                           00000FE4
PREINC2                           00000FDC
PROD                              00000FF3
PRODH                             00000FF4
MPASM  5.35beta                     SERIAL-IO.ASM   6-9-2012  1:09:17         PAGE 25


SYMBOL TABLE
  LABEL                             VALUE 

PRODL                             00000FF3
PRSEG0                            00000000
PRSEG1                            00000001
PRSEG2                            00000002
PRSEN                             00000007
PSA                               00000003
PSP0                              00000000
PSP1                              00000001
PSP2                              00000002
PSP3                              00000003
PSP4                              00000004
PSP5                              00000005
PSP6                              00000006
PSP7                              00000007
PSPIE                             00000007
PSPIF                             00000007
PSPIP                             00000007
PSPMODE                           00000004
PSSAC0                            00000002
PSSAC1                            00000003
PSSBD0                            00000000
PSSBD1                            00000001
R                                 00000002
RA0                               00000000
RA1                               00000001
RA2                               00000002
RA3                               00000003
RA4                               00000004
RA5                               00000005
RA6                               00000006
RA7                               00000007
RB0_B0DLC                         00000004
RB0_B1DLC                         00000004
RB0_B2DLC                         00000004
RB0_B3DLC                         00000004
RB0_B4DLC                         00000004
RB0_B5DLC                         00000004
RB0_DDRB                          00000000
RB0_PORTB                         00000000
RB0_RXB0DLC                       00000004
RB0_RXB1DLC                       00000004
RB1_B0DLC                         00000005
RB1_B1DLC                         00000005
RB1_B2DLC                         00000005
RB1_B3DLC                         00000005
RB1_B4DLC                         00000005
RB1_B5DLC                         00000005
RB1_DDRB                          00000001
RB1_PORTB                         00000001
RB1_RXB0DLC                       00000005
RB1_RXB1DLC                       00000005
RB2                               00000002
RB3                               00000003
RB4                               00000004
RB5                               00000005
RB6                               00000006
RB7                               00000007
RBIE                              00000003
RBIF                              00000000
RBIP                              00000000
RBPU                              00000007
RC0                               00000000
RC1                               00000001
RC2                               00000002
RC3                               00000003
RC4                               00000004
RC5                               00000005
RC6                               00000006
RC7                               00000007
RCEN                              00000003
RCIDL                             00000006
RCIE                              00000005
RCIF                              00000005
RCIP                              00000005
RCON                              00000FD0
RCREG                             00000FAE
RCSTA                             00000FAB
RD                                00000000
RD0                               00000000
RD1                               00000001
RD16                              00000007
RD2                               00000002
RD3                               00000003
RD4                               00000004
MPASM  5.35beta                     SERIAL-IO.ASM   6-9-2012  1:09:17         PAGE 26


SYMBOL TABLE
  LABEL                             VALUE 

RD5                               00000005
RD6                               00000006
RD7                               00000007
RE0                               00000000
RE1                               00000001
RE2                               00000002
RE3                               00000003
READ_DONE                         00000110
READ_OK                           000000FA
READ_WRITE                        00000002
REC0                              00000000
REC1                              00000001
REC2                              00000002
REC3                              00000003
REC4                              00000004
REC5                              00000005
REC6                              00000006
REC7                              00000007
REQOP0                            00000005
REQOP1                            00000006
REQOP2                            00000007
RESRB0                            00000004
RESRB1                            00000005
RI                                00000004
RSEN                              00000001
RTREN                             00000002
RTRRO                             00000005
RX                                00000007
RX9                               00000006
RX9D                              00000000
RXB0CON                           00000F60
RXB0D0                            00000F66
RXB0D00                           00000000
RXB0D01                           00000001
RXB0D02                           00000002
RXB0D03                           00000003
RXB0D04                           00000004
RXB0D05                           00000005
RXB0D06                           00000006
RXB0D07                           00000007
RXB0D1                            00000F67
RXB0D10                           00000000
RXB0D11                           00000001
RXB0D12                           00000002
RXB0D13                           00000003
RXB0D14                           00000004
RXB0D15                           00000005
RXB0D16                           00000006
RXB0D17                           00000007
RXB0D2                            00000F68
RXB0D20                           00000000
RXB0D21                           00000001
RXB0D22                           00000002
RXB0D23                           00000003
RXB0D24                           00000004
RXB0D25                           00000005
RXB0D26                           00000006
RXB0D27                           00000007
RXB0D3                            00000F69
RXB0D30                           00000000
RXB0D31                           00000001
RXB0D32                           00000002
RXB0D33                           00000003
RXB0D34                           00000004
RXB0D35                           00000005
RXB0D36                           00000006
RXB0D37                           00000007
RXB0D4                            00000F6A
RXB0D40                           00000000
RXB0D41                           00000001
RXB0D42                           00000002
RXB0D43                           00000003
RXB0D44                           00000004
RXB0D45                           00000005
RXB0D46                           00000006
RXB0D47                           00000007
RXB0D5                            00000F6B
RXB0D50                           00000000
RXB0D51                           00000001
RXB0D52                           00000002
RXB0D53                           00000003
RXB0D54                           00000004
RXB0D55                           00000005
RXB0D56                           00000006
MPASM  5.35beta                     SERIAL-IO.ASM   6-9-2012  1:09:17         PAGE 27


SYMBOL TABLE
  LABEL                             VALUE 

RXB0D57                           00000007
RXB0D6                            00000F6C
RXB0D60                           00000000
RXB0D61                           00000001
RXB0D62                           00000002
RXB0D63                           00000003
RXB0D64                           00000004
RXB0D65                           00000005
RXB0D66                           00000006
RXB0D67                           00000007
RXB0D7                            00000F6D
RXB0D70                           00000000
RXB0D71                           00000001
RXB0D72                           00000002
RXB0D73                           00000003
RXB0D74                           00000004
RXB0D75                           00000005
RXB0D76                           00000006
RXB0D77                           00000007
RXB0DBEN                          00000002
RXB0DLC                           00000F65
RXB0EIDH                          00000F63
RXB0EIDL                          00000F64
RXB0IE                            00000000
RXB0IF                            00000000
RXB0IP                            00000000
RXB0OVFL                          00000007
RXB0SIDH                          00000F61
RXB0SIDL                          00000F62
RXB1CON                           00000F50
RXB1D0                            00000F56
RXB1D00                           00000000
RXB1D01                           00000001
RXB1D02                           00000002
RXB1D03                           00000003
RXB1D04                           00000004
RXB1D05                           00000005
RXB1D06                           00000006
RXB1D07                           00000007
RXB1D1                            00000F57
RXB1D10                           00000000
RXB1D11                           00000001
RXB1D12                           00000002
RXB1D13                           00000003
RXB1D14                           00000004
RXB1D15                           00000005
RXB1D16                           00000006
RXB1D17                           00000007
RXB1D2                            00000F58
RXB1D20                           00000000
RXB1D21                           00000001
RXB1D22                           00000002
RXB1D23                           00000003
RXB1D24                           00000004
RXB1D25                           00000005
RXB1D26                           00000006
RXB1D27                           00000007
RXB1D3                            00000F59
RXB1D30                           00000000
RXB1D31                           00000001
RXB1D32                           00000002
RXB1D33                           00000003
RXB1D34                           00000004
RXB1D35                           00000005
RXB1D36                           00000006
RXB1D37                           00000007
RXB1D4                            00000F5A
RXB1D40                           00000000
RXB1D41                           00000001
RXB1D42                           00000002
RXB1D43                           00000003
RXB1D44                           00000004
RXB1D45                           00000005
RXB1D46                           00000006
RXB1D47                           00000007
RXB1D5                            00000F5B
RXB1D50                           00000000
RXB1D51                           00000001
RXB1D52                           00000002
RXB1D53                           00000003
RXB1D54                           00000004
RXB1D55                           00000005
RXB1D56                           00000006
RXB1D57                           00000007
MPASM  5.35beta                     SERIAL-IO.ASM   6-9-2012  1:09:17         PAGE 28


SYMBOL TABLE
  LABEL                             VALUE 

RXB1D6                            00000F5C
RXB1D60                           00000000
RXB1D61                           00000001
RXB1D62                           00000002
RXB1D63                           00000003
RXB1D64                           00000004
RXB1D65                           00000005
RXB1D66                           00000006
RXB1D67                           00000007
RXB1D7                            00000F5D
RXB1D70                           00000000
RXB1D71                           00000001
RXB1D72                           00000002
RXB1D73                           00000003
RXB1D74                           00000004
RXB1D75                           00000005
RXB1D76                           00000006
RXB1D77                           00000007
RXB1DLC                           00000F55
RXB1EIDH                          00000F53
RXB1EIDL                          00000F54
RXB1IE                            00000001
RXB1IF                            00000001
RXB1IP                            00000001
RXB1OVFL                          00000006
RXB1SIDH                          00000F51
RXB1SIDL                          00000F52
RXBODBEN                          00000002
RXBP                              00000003
RXBnIE                            00000001
RXBnIF                            00000001
RXBnIP                            00000001
RXBnOVFL                          00000006
RXDATA_FULL                       00000003
RXDATA_QUEUE                      00000001
RXERRCNT                          00000F75
RXF0EIDH                          00000F02
RXF0EIDL                          00000F03
RXF0EN                            00000000
RXF0SIDH                          00000F00
RXF0SIDL                          00000F01
RXF10EIDH                         00000D76
RXF10EIDL                         00000D77
RXF10EN                           00000002
RXF10SIDH                         00000D74
RXF10SIDL                         00000D75
RXF11EIDH                         00000D7A
RXF11EIDL                         00000D7B
RXF11EN                           00000003
RXF11SIDH                         00000D78
RXF11SIDL                         00000D79
RXF12EIDH                         00000D82
RXF12EIDL                         00000D83
RXF12EN                           00000004
RXF12SIDH                         00000D80
RXF12SIDL                         00000D81
RXF13EIDH                         00000D86
RXF13EIDL                         00000D87
RXF13EN                           00000005
RXF13SIDH                         00000D84
RXF13SIDL                         00000D85
RXF14EIDH                         00000D8A
RXF14EIDL                         00000D8B
RXF14EN                           00000006
RXF14SIDH                         00000D88
RXF14SIDL                         00000D89
RXF15EIDH                         00000D92
RXF15EIDL                         00000D93
RXF15EN                           00000007
RXF15SIDH                         00000D90
RXF15SIDL                         00000D91
RXF1EIDH                          00000F06
RXF1EIDL                          00000F07
RXF1EN                            00000001
RXF1SIDH                          00000F04
RXF1SIDL                          00000F05
RXF2EIDH                          00000F0A
RXF2EIDL                          00000F0B
RXF2EN                            00000002
RXF2SIDH                          00000F08
RXF2SIDL                          00000F09
RXF3EIDH                          00000F0E
RXF3EIDL                          00000F0F
RXF3EN                            00000003
MPASM  5.35beta                     SERIAL-IO.ASM   6-9-2012  1:09:17         PAGE 29


SYMBOL TABLE
  LABEL                             VALUE 

RXF3SIDH                          00000F0C
RXF3SIDL                          00000F0D
RXF4EIDH                          00000F12
RXF4EIDL                          00000F13
RXF4EN                            00000004
RXF4SIDH                          00000F10
RXF4SIDL                          00000F11
RXF5EIDH                          00000F16
RXF5EIDL                          00000F17
RXF5EN                            00000005
RXF5SIDH                          00000F14
RXF5SIDL                          00000F15
RXF6EIDH                          00000D62
RXF6EIDL                          00000D63
RXF6EN                            00000006
RXF6SIDH                          00000D60
RXF6SIDL                          00000D61
RXF7EIDH                          00000D66
RXF7EIDL                          00000D67
RXF7EN                            00000007
RXF7SIDH                          00000D64
RXF7SIDL                          00000D65
RXF8EIDH                          00000D6A
RXF8EIDL                          00000D6B
RXF8EN                            00000000
RXF8SIDH                          00000D68
RXF8SIDL                          00000D69
RXF9EIDH                          00000D72
RXF9EIDL                          00000D73
RXF9EN                            00000001
RXF9SIDH                          00000D70
RXF9SIDL                          00000D71
RXFBCON0                          00000DE0
RXFBCON1                          00000DE1
RXFBCON2                          00000DE2
RXFBCON3                          00000DE3
RXFBCON4                          00000DE4
RXFBCON5                          00000DE5
RXFBCON6                          00000DE6
RXFBCON7                          00000DE7
RXFCON0                           00000DD4
RXFCON1                           00000DD5
RXFUL                             00000007
RXM0                              00000005
RXM0EIDH                          00000F1A
RXM0EIDL                          00000F1B
RXM0SIDH                          00000F18
RXM0SIDL                          00000F19
RXM1                              00000006
RXM1EIDH                          00000F1E
RXM1EIDL                          00000F1F
RXM1SIDH                          00000F1C
RXM1SIDL                          00000F1D
RXRTR                             00000006
RXRTRRO_B0CON                     00000005
RXRTRRO_B1CON                     00000005
RXRTRRO_B2CON                     00000005
RXRTRRO_B3CON                     00000005
RXRTRRO_B4CON                     00000005
RXRTRRO_B5CON                     00000005
RXRTRRO_RXB0CON                   00000003
RXRTRRO_RXB1CON                   00000003
RXWARN                            00000001
RX_BUFFER                         00000200
RX_BUF_END                        00000306
RX_BUF_START                      00000305
RX_OK                             00000230
R_W                               00000002
S                                 00000003
SAM                               00000006
SBOREN                            00000006
SCK                               00000003
SCKP                              00000004
SCL                               00000003
SCS0                              00000000
SCS1                              00000001
SDA                               00000004
SDFLC                             00000DD8
SDI                               00000004
SDO                               00000005
SEG1PH0                           00000003
SEG1PH1                           00000004
SEG1PH2                           00000005
SEG2PH0                           00000000
MPASM  5.35beta                     SERIAL-IO.ASM   6-9-2012  1:09:17         PAGE 30


SYMBOL TABLE
  LABEL                             VALUE 

SEG2PH1                           00000001
SEG2PH2                           00000002
SEG2PHT                           00000007
SEG2PHTS                          00000007
SEN                               00000000
SENDB                             00000003
SID0                              00000005
SID1                              00000006
SID10                             00000007
SID2                              00000007
SID3                              00000000
SID4                              00000001
SID5                              00000002
SID6                              00000003
SID7                              00000004
SID8                              00000005
SID9                              00000006
SIO_115200                        00000009
SIO_1200                          00000002
SIO_19200                         00000006
SIO_2400                          00000003
SIO_300                           00000000
SIO_38400                         00000007
SIO_4800                          00000004
SIO_57600                         00000008
SIO_600                           00000001
SIO_9600                          00000005
SIO_DATA_START                    00000300
SIO_ECHO                          0000005E
SIO_ECHO_W                        0000005A
SIO_FERR                          00000005
SIO_GETCHAR                       00000118
SIO_GETCHAR_W                     00000112
SIO_INIT                          00000000
SIO_INPUT                         00000301
SIO_NEWLINE                       000000DC
SIO_ORUN                          00000004
SIO_OUTPUT                        00000302
SIO_PRINT_HEX                     00000126
SIO_PRINT_HEX_W                   00000122
SIO_PUTCHAR                       0000009A
SIO_PUTCHAR_W                     0000009E
SIO_READ                          000000EE
SIO_READ_W                        000000E8
SIO_RECV                          00000214
SIO_RX_BUFFER_START               00000200
SIO_SEND                          000001E0
SIO_SET_BAUD_W                    00000044
SIO_STATUS                        00000300
SIO_TABLE_START                   00015000
SIO_TMPPC                         00000309
SIO_TX_BUFFER_START               00000100
SIO_WRITE                         000000B0
SIO_WRITE_W                       000000B4
SIO_X                             00000308
SJW0                              00000006
SJW1                              00000007
SMP                               00000007
SP0                               00000000
SP1                               00000001
SP2                               00000002
SP3                               00000003
SP4                               00000004
SPBRG                             00000FAF
SPBRGH                            00000FB0
SPEN                              00000007
SPIN_FOR_BUF_DRAIN                000000A4
SREN                              00000005
SRR                               00000004
SS                                00000005
SSPADD                            00000FC8
SSPBUF                            00000FC9
SSPCON1                           00000FC6
SSPCON2                           00000FC5
SSPEN                             00000005
SSPIE                             00000003
SSPIF                             00000003
SSPIP                             00000003
SSPM0                             00000000
SSPM1                             00000001
SSPM2                             00000002
SSPM3                             00000003
SSPOV                             00000006
SSPSTAT                           00000FC7
MPASM  5.35beta                     SERIAL-IO.ASM   6-9-2012  1:09:17         PAGE 31


SYMBOL TABLE
  LABEL                             VALUE 

STATUS                            00000FD8
STKFUL                            00000007
STKOVF                            00000007
STKPTR                            00000FFC
STKPTR0                           00000000
STKPTR1                           00000001
STKPTR2                           00000002
STKPTR3                           00000003
STKPTR4                           00000004
STKUNF                            00000006
SWDTE                             00000000
SWDTEN                            00000000
SYNC                              00000004
T08BIT                            00000006
T0CKI                             00000004
T0CON                             00000FD5
T0CS                              00000005
T0IE                              00000005
T0IF                              00000002
T0IP                              00000002
T0PS0                             00000000
T0PS1                             00000001
T0PS2                             00000002
T0PS3                             00000003
T0SE                              00000004
T13CKI                            00000000
T1CKPS0                           00000004
T1CKPS1                           00000005
T1CON                             00000FCD
T1INSYNC                          00000002
T1OSCEN                           00000003
T1OSI                             00000001
T1OSO                             00000000
T1RUN                             00000006
T1SYNC                            00000002
T2CKPS0                           00000000
T2CKPS1                           00000001
T2CON                             00000FCA
T2OUTPS0                          00000003
T2OUTPS1                          00000004
T2OUTPS2                          00000005
T2OUTPS3                          00000006
T3CCP1                            00000003
T3CCP2                            00000006
T3CKPS0                           00000004
T3CKPS1                           00000005
T3CON                             00000FB1
T3ECCP1                           00000006
T3NSYNC                           00000002
T3SYNC                            00000002
TABLAT                            00000FF5
TBLPTR                            00000FF6
TBLPTRH                           00000FF7
TBLPTRL                           00000FF6
TBLPTRU                           00000FF8
TEC0                              00000000
TEC1                              00000001
TEC2                              00000002
TEC3                              00000003
TEC4                              00000004
TEC5                              00000005
TEC6                              00000006
TEC7                              00000007
TMR0H                             00000FD7
TMR0IE                            00000005
TMR0IF                            00000002
TMR0IP                            00000002
TMR0L                             00000FD6
TMR0ON                            00000007
TMR1CS                            00000001
TMR1H                             00000FCF
TMR1IE                            00000000
TMR1IF                            00000000
TMR1IP                            00000000
TMR1L                             00000FCE
TMR1ON                            00000000
TMR2                              00000FCC
TMR2IE                            00000001
TMR2IF                            00000001
TMR2IP                            00000001
TMR2ON                            00000002
TMR3CS                            00000001
TMR3H                             00000FB3
TMR3IE                            00000001
MPASM  5.35beta                     SERIAL-IO.ASM   6-9-2012  1:09:17         PAGE 32


SYMBOL TABLE
  LABEL                             VALUE 

TMR3IF                            00000001
TMR3IP                            00000001
TMR3L                             00000FB2
TMR3ON                            00000000
TO                                00000003
TOS                               00000FFD
TOSH                              00000FFE
TOSL                              00000FFD
TOSU                              00000FFF
TRISA                             00000F92
TRISA0                            00000000
TRISA1                            00000001
TRISA2                            00000002
TRISA3                            00000003
TRISA4                            00000004
TRISA5                            00000005
TRISA6                            00000006
TRISA7                            00000007
TRISB                             00000F93
TRISB0                            00000000
TRISB1                            00000001
TRISB2                            00000002
TRISB3                            00000003
TRISB4                            00000004
TRISB5                            00000005
TRISB6                            00000006
TRISB7                            00000007
TRISC                             00000F94
TRISC0                            00000000
TRISC1                            00000001
TRISC2                            00000002
TRISC3                            00000003
TRISC4                            00000004
TRISC5                            00000005
TRISC6                            00000006
TRISC7                            00000007
TRISD                             00000F95
TRISD0                            00000000
TRISD1                            00000001
TRISD2                            00000002
TRISD3                            00000003
TRISD4                            00000004
TRISD5                            00000005
TRISD6                            00000006
TRISD7                            00000007
TRISE                             00000F96
TRISE0                            00000000
TRISE1                            00000001
TRISE2                            00000002
TRMT                              00000001
TUN0                              00000000
TUN1                              00000001
TUN2                              00000002
TUN3                              00000003
TUN4                              00000004
TX                                00000006
TX9                               00000006
TX9D                              00000000
TXABT                             00000006
TXB0CON                           00000F40
TXB0D0                            00000F46
TXB0D00                           00000000
TXB0D01                           00000001
TXB0D02                           00000002
TXB0D03                           00000003
TXB0D04                           00000004
TXB0D05                           00000005
TXB0D06                           00000006
TXB0D07                           00000007
TXB0D1                            00000F47
TXB0D10                           00000000
TXB0D11                           00000001
TXB0D12                           00000002
TXB0D13                           00000003
TXB0D14                           00000004
TXB0D15                           00000005
TXB0D16                           00000006
TXB0D17                           00000007
TXB0D2                            00000F48
TXB0D20                           00000000
TXB0D21                           00000001
TXB0D22                           00000002
TXB0D23                           00000003
TXB0D24                           00000004
MPASM  5.35beta                     SERIAL-IO.ASM   6-9-2012  1:09:17         PAGE 33


SYMBOL TABLE
  LABEL                             VALUE 

TXB0D25                           00000005
TXB0D26                           00000006
TXB0D27                           00000007
TXB0D3                            00000F49
TXB0D30                           00000000
TXB0D31                           00000001
TXB0D32                           00000002
TXB0D33                           00000003
TXB0D34                           00000004
TXB0D35                           00000005
TXB0D36                           00000006
TXB0D37                           00000007
TXB0D4                            00000F4A
TXB0D40                           00000000
TXB0D41                           00000001
TXB0D42                           00000002
TXB0D43                           00000003
TXB0D44                           00000004
TXB0D45                           00000005
TXB0D46                           00000006
TXB0D47                           00000007
TXB0D5                            00000F4B
TXB0D50                           00000000
TXB0D51                           00000001
TXB0D52                           00000002
TXB0D53                           00000003
TXB0D54                           00000004
TXB0D55                           00000005
TXB0D56                           00000006
TXB0D57                           00000007
TXB0D6                            00000F4C
TXB0D60                           00000000
TXB0D61                           00000001
TXB0D62                           00000002
TXB0D63                           00000003
TXB0D64                           00000004
TXB0D65                           00000005
TXB0D66                           00000006
TXB0D67                           00000007
TXB0D7                            00000F4D
TXB0D70                           00000000
TXB0D71                           00000001
TXB0D72                           00000002
TXB0D73                           00000003
TXB0D74                           00000004
TXB0D75                           00000005
TXB0D76                           00000006
TXB0D77                           00000007
TXB0DLC                           00000F45
TXB0EIDH                          00000F43
TXB0EIDL                          00000F44
TXB0IE                            00000002
TXB0IF                            00000002
TXB0IP                            00000002
TXB0SIDH                          00000F41
TXB0SIDL                          00000F42
TXB1CON                           00000F30
TXB1D0                            00000F36
TXB1D00                           00000000
TXB1D01                           00000001
TXB1D02                           00000002
TXB1D03                           00000003
TXB1D04                           00000004
TXB1D05                           00000005
TXB1D06                           00000006
TXB1D07                           00000007
TXB1D1                            00000F37
TXB1D10                           00000000
TXB1D11                           00000001
TXB1D12                           00000002
TXB1D13                           00000003
TXB1D14                           00000004
TXB1D15                           00000005
TXB1D16                           00000006
TXB1D17                           00000007
TXB1D2                            00000F38
TXB1D20                           00000000
TXB1D21                           00000001
TXB1D22                           00000002
TXB1D23                           00000003
TXB1D24                           00000004
TXB1D25                           00000005
TXB1D26                           00000006
TXB1D27                           00000007
MPASM  5.35beta                     SERIAL-IO.ASM   6-9-2012  1:09:17         PAGE 34


SYMBOL TABLE
  LABEL                             VALUE 

TXB1D3                            00000F39
TXB1D30                           00000000
TXB1D31                           00000001
TXB1D32                           00000002
TXB1D33                           00000003
TXB1D34                           00000004
TXB1D35                           00000005
TXB1D36                           00000006
TXB1D37                           00000007
TXB1D4                            00000F3A
TXB1D40                           00000000
TXB1D41                           00000001
TXB1D42                           00000002
TXB1D43                           00000003
TXB1D44                           00000004
TXB1D45                           00000005
TXB1D46                           00000006
TXB1D47                           00000007
TXB1D5                            00000F3B
TXB1D50                           00000000
TXB1D51                           00000001
TXB1D52                           00000002
TXB1D53                           00000003
TXB1D54                           00000004
TXB1D55                           00000005
TXB1D56                           00000006
TXB1D57                           00000007
TXB1D6                            00000F3C
TXB1D60                           00000000
TXB1D61                           00000001
TXB1D62                           00000002
TXB1D63                           00000003
TXB1D64                           00000004
TXB1D65                           00000005
TXB1D66                           00000006
TXB1D67                           00000007
TXB1D7                            00000F3D
TXB1D70                           00000000
TXB1D71                           00000001
TXB1D72                           00000002
TXB1D73                           00000003
TXB1D74                           00000004
TXB1D75                           00000005
TXB1D76                           00000006
TXB1D77                           00000007
TXB1DLC                           00000F35
TXB1EIDH                          00000F33
TXB1EIDL                          00000F34
TXB1IE                            00000003
TXB1IF                            00000003
TXB1IP                            00000003
TXB1SIDH                          00000F31
TXB1SIDL                          00000F32
TXB2CON                           00000F20
TXB2D0                            00000F26
TXB2D00                           00000000
TXB2D01                           00000001
TXB2D02                           00000002
TXB2D03                           00000003
TXB2D04                           00000004
TXB2D05                           00000005
TXB2D06                           00000006
TXB2D07                           00000007
TXB2D1                            00000F27
TXB2D10                           00000000
TXB2D11                           00000001
TXB2D12                           00000002
TXB2D13                           00000003
TXB2D14                           00000004
TXB2D15                           00000005
TXB2D16                           00000006
TXB2D17                           00000007
TXB2D2                            00000F28
TXB2D20                           00000000
TXB2D21                           00000001
TXB2D22                           00000002
TXB2D23                           00000003
TXB2D24                           00000004
TXB2D25                           00000005
TXB2D26                           00000006
TXB2D27                           00000007
TXB2D3                            00000F29
TXB2D30                           00000000
TXB2D31                           00000001
MPASM  5.35beta                     SERIAL-IO.ASM   6-9-2012  1:09:17         PAGE 35


SYMBOL TABLE
  LABEL                             VALUE 

TXB2D32                           00000002
TXB2D33                           00000003
TXB2D34                           00000004
TXB2D35                           00000005
TXB2D36                           00000006
TXB2D37                           00000007
TXB2D4                            00000F2A
TXB2D40                           00000000
TXB2D41                           00000001
TXB2D42                           00000002
TXB2D43                           00000003
TXB2D44                           00000004
TXB2D45                           00000005
TXB2D46                           00000006
TXB2D47                           00000007
TXB2D5                            00000F2B
TXB2D50                           00000000
TXB2D51                           00000001
TXB2D52                           00000002
TXB2D53                           00000003
TXB2D54                           00000004
TXB2D55                           00000005
TXB2D56                           00000006
TXB2D57                           00000007
TXB2D6                            00000F2C
TXB2D60                           00000000
TXB2D61                           00000001
TXB2D62                           00000002
TXB2D63                           00000003
TXB2D64                           00000004
TXB2D65                           00000005
TXB2D66                           00000006
TXB2D67                           00000007
TXB2D7                            00000F2D
TXB2D70                           00000000
TXB2D71                           00000001
TXB2D72                           00000002
TXB2D73                           00000003
TXB2D74                           00000004
TXB2D75                           00000005
TXB2D76                           00000006
TXB2D77                           00000007
TXB2DLC                           00000F25
TXB2EIDH                          00000F23
TXB2EIDL                          00000F24
TXB2IE                            00000004
TXB2IF                            00000004
TXB2IP                            00000004
TXB2SIDH                          00000F21
TXB2SIDL                          00000F22
TXBIE                             00000DFC
TXBIF                             00000007
TXBIFBXB2CON                      00000007
TXBIFTXB1CON                      00000007
TXBIP                             00000004
TXBO                              00000005
TXBP                              00000004
TXBnIE                            00000004
TXBnIF                            00000004
TXBnIP                            00000004
TXDATA_FULL                       00000002
TXDATA_QUEUE                      00000000
TXEN                              00000005
TXERR                             00000004
TXERRCNT                          00000F76
TXIE                              00000004
TXIF                              00000004
TXIP                              00000004
TXLARB                            00000005
TXPRI0                            00000000
TXPRI1                            00000001
TXREG                             00000FAD
TXREQ                             00000003
TXRTR                             00000006
TXSTA                             00000FAC
TXWARN                            00000002
TX_BUFFER                         00000100
TX_BUF_END                        00000304
TX_BUF_START                      00000303
TX_CHAR                           00000307
TX_DONE                           0000020A
TX_OK                             000001EC
UA                                00000001
VCFG0                             00000004
MPASM  5.35beta                     SERIAL-IO.ASM   6-9-2012  1:09:17         PAGE 36


SYMBOL TABLE
  LABEL                             VALUE 

VCFG1                             00000005
VDIRMAG                           00000007
VREFM                             00000002
VREFP                             00000003
W                                 00000000
WAKDIS                            00000007
WAKFIL                            00000006
WAKIE                             00000006
WAKIF                             00000006
WAKIP                             00000006
WCOL                              00000007
WDTCON                            00000FD1
WIN0                              00000001
WIN1                              00000002
WIN2                              00000003
WR                                00000001
WREG                              00000FE8
WREN                              00000002
WRERR                             00000003
WRITE_OK                          000000C8
WUE                               00000001
Z                                 00000002
_BBSIZ_1024_4L                    000000CF
_BBSIZ_2048_4L                    000000DF
_BBSIZ_4096_4L                    000000EF
_BOREN_BOACTIVE_2L                000000FD
_BOREN_BOHW_2L                    000000FF
_BOREN_OFF_2L                     000000F9
_BOREN_SBORENCTRL_2L              000000FB
_BORV_0_2L                        000000E7
_BORV_1_2L                        000000EF
_BORV_2_2L                        000000F7
_BORV_3_2L                        000000FF
_CONFIG1H                         00300001
_CONFIG2H                         00300003
_CONFIG2L                         00300002
_CONFIG3H                         00300005
_CONFIG4L                         00300006
_CONFIG5H                         00300009
_CONFIG5L                         00300008
_CONFIG6H                         0030000B
_CONFIG6L                         0030000A
_CONFIG7H                         0030000D
_CONFIG7L                         0030000C
_CP0_OFF_5L                       000000FF
_CP0_ON_5L                        000000FE
_CP1_OFF_5L                       000000FF
_CP1_ON_5L                        000000FD
_CP2_OFF_5L                       000000FF
_CP2_ON_5L                        000000FB
_CP3_OFF_5L                       000000FF
_CP3_ON_5L                        000000F7
_CP4_OFF_5L                       000000FF
_CP4_ON_5L                        000000EF
_CP5_OFF_5L                       000000FF
_CP5_ON_5L                        000000DF
_CPB_OFF_5H                       000000FF
_CPB_ON_5H                        000000BF
_CPD_OFF_5H                       000000FF
_CPD_ON_5H                        0000007F
_DEBUG_OFF_4L                     000000FF
_DEBUG_ON_4L                      0000007F
_DEVID1                           003FFFFE
_DEVID2                           003FFFFF
_EBTR0_OFF_7L                     000000FF
_EBTR0_ON_7L                      000000FE
_EBTR1_OFF_7L                     000000FF
_EBTR1_ON_7L                      000000FD
_EBTR2_OFF_7L                     000000FF
_EBTR2_ON_7L                      000000FB
_EBTR3_OFF_7L                     000000FF
_EBTR3_ON_7L                      000000F7
_EBTR4_OFF_7L                     000000FF
_EBTR4_ON_7L                      000000EF
_EBTR5_OFF_7L                     000000FF
_EBTR5_ON_7L                      000000DF
_EBTRB_OFF_7H                     000000FF
_EBTRB_ON_7H                      000000BF
_FCMEN_OFF_1H                     000000BF
_FCMEN_ON_1H                      000000FF
_IDLOC0                           00200000
_IDLOC1                           00200001
_IDLOC2                           00200002
_IDLOC3                           00200003
MPASM  5.35beta                     SERIAL-IO.ASM   6-9-2012  1:09:17         PAGE 37


SYMBOL TABLE
  LABEL                             VALUE 

_IDLOC4                           00200004
_IDLOC5                           00200005
_IDLOC6                           00200006
_IDLOC7                           00200007
_IESO_OFF_1H                      0000007F
_IESO_ON_1H                       000000FF
_LPT1OSC_OFF_3H                   000000FB
_LPT1OSC_ON_3H                    000000FF
_LVP_OFF_4L                       000000FB
_LVP_ON_4L                        000000FF
_MCLRE_OFF_3H                     0000007F
_MCLRE_ON_3H                      000000FF
_OSC_ECIO_1H                      000000F5
_OSC_EC_1H                        000000F4
_OSC_HSPLL_1H                     000000F6
_OSC_HS_1H                        000000F2
_OSC_IRCIO67_1H                   000000F8
_OSC_IRCIO7_1H                    000000F9
_OSC_LP_1H                        000000F0
_OSC_RCIO_1H                      000000F7
_OSC_RC_1H                        000000F3
_OSC_XT_1H                        000000F1
_PBADEN_OFF_3H                    000000FD
_PBADEN_ON_3H                     000000FF
_PWRT_OFF_2L                      000000FF
_PWRT_ON_2L                       000000FE
_STVREN_OFF_4L                    000000FE
_STVREN_ON_4L                     000000FF
_WDTPS_1024_2H                    000000F5
_WDTPS_128_2H                     000000EF
_WDTPS_16384_2H                   000000FD
_WDTPS_16_2H                      000000E9
_WDTPS_1_2H                       000000E1
_WDTPS_2048_2H                    000000F7
_WDTPS_256_2H                     000000F1
_WDTPS_2_2H                       000000E3
_WDTPS_32768_2H                   000000FF
_WDTPS_32_2H                      000000EB
_WDTPS_4096_2H                    000000F9
_WDTPS_4_2H                       000000E5
_WDTPS_512_2H                     000000F3
_WDTPS_64_2H                      000000ED
_WDTPS_8192_2H                    000000FB
_WDTPS_8_2H                       000000E7
_WDT_OFF_2H                       000000FE
_WDT_ON_2H                        000000FF
_WRT0_OFF_6L                      000000FF
_WRT0_ON_6L                       000000FE
_WRT1_OFF_6L                      000000FF
_WRT1_ON_6L                       000000FD
_WRT2_OFF_6L                      000000FF
_WRT2_ON_6L                       000000FB
_WRT3_OFF_6L                      000000FF
_WRT3_ON_6L                       000000F7
_WRT4_OFF_6L                      000000FF
_WRT4_ON_6L                       000000EF
_WRT5_OFF_6L                      000000FF
_WRT5_ON_6L                       000000DF
_WRTB_OFF_6H                      000000FF
_WRTB_ON_6H                       000000BF
_WRTC_OFF_6H                      000000FF
_WRTC_ON_6H                       000000DF
_WRTD_OFF_6H                      000000FF
_WRTD_ON_6H                       0000007F
_XINST_OFF_4L                     000000BF
_XINST_ON_4L                      000000FF
__18F4685                         00000001
__DEBUG                           1

Errors   :     0
Warnings :     0 reported,     0 suppressed
Messages :     0 reported,     0 suppressed

